function log(){"undefined"!=typeof console&&console.log(arguments)}!function($){var API={usedIds:new Array,isMobile:window.matchMedia("only screen and (max-width: 40em)"),createRandomNumber:function(){var t=Math.floor(10002*Math.random()+1);return-1==$.inArray(t,this.usedIds)?(this.usedIds.push(t),t):this.createRandomNumber()},ajax:function(async,data,type,dataType,sMsg,eMsg){var res=$.ajax({url:"index.php",async:async,global:!1,data:data,type:type,dataType:dataType,success:function(){null!=sMsg&&alert(sMsg)},error:function(){null!=eMsg&&alert(eMsg)}}).responseText;return"json"==dataType&&""!=res&&null!=res&&res.length>0&&(res=eval("("+res+")")),res},dotToComma:function(t){return t=(t+="").replace(".",",")},commaToDot:function(t){return t=(t=(t+="").replace(".","")).replace(",",".")},round:function(t,e){if(e<1||e>14)return!1;var a=Math.pow(10,e),i=(Math.round(t*a)/a).toString();return-1==i.indexOf(".")&&(i+="."),(i+=a.toString().substring(1)).substring(0,i.indexOf(".")+e+1)},priceView:function(t){var e=",",a=".";return function(t,i,r){i||(i=0);var n="",s=t<0?"-":"",l=Math.pow(10,i),d=Math.abs(t),o=(d=""+parseInt(d*l+.5)/l).indexOf(".");for(r&&i&&(d+=(-1==o?".":"")+l.toString().substring(1)),-1==(o=d.indexOf("."))?o=d.length:n=e+d.substr(o+1,i);o>0;)n=o-3>0?a+d.substring(o-3,o)+n:d.substring(0,o)+n,o-=3;return s+n}(t,2,!0)},isset:function(t){return void 0!==t&&null!=t}},Validate={config:{regexp:{ganzeZahl:{exp:/^([0-9_])+$/i,text:"Dieses Feld darf nur ganze Zahlen enthalten!"}},material:{max:2030,min:1520},facette:{max:20,min:0},maxQty:100},updateText:function(t,e){e?$(t).show().html(e):$(t).hide().html("")},addErrorStyle:function(t){t.attr("style","border: 1px solid #A51107 !important; color: #A51107 !important; overflow:hidden; padding:0px !important;padding-left:4px !important;")},removeErrorStyle:function(t){t.removeAttr("style")},emptyField:function(t,e){var a=[];for(var i in t)""==t[i].val()&&a.push(i);if(a.length>1){for(var r="Die Felder ",n=0;n<a.length;n++)r+=0==n?'"'+a[n]+'"':', "'+a[n]+'"';return r+=" d&uuml;rfen nicht leer sein!",this.updateText(e,r),!1}return 1==a.length?(this.updateText(e,'Das Feld "'+a[0]+'" darf nicht leer sein!'),!1):(this.updateText(e,""),!0)},checkRegexp:function(t,e){var a=this.config.regexp.ganzeZahl.exp,i=this.config.regexp.ganzeZahl.text;return t.is(":visible")?a.test(t.val())?(this.removeErrorStyle(t),this.updateText(e,""),e.parent("div").attr("style","margin-top:-8px;").parent("div").attr("style","height: 258px;").prev("div").attr("style","width: 100%; background-color: rgba(255, 255, 255, 0.3); position: absolute; height: 245px;"),!0):(this.addErrorStyle(t),this.updateText(e,i),e.parent("div").attr("style","margin-top:-8px;").parent("div").attr("style","height: 258px;").prev("div").attr("style","width: 100%; background-color: rgba(255, 255, 255, 0.3); position: absolute; height: 245px;"),!1):(this.removeErrorStyle(0),this.updateText(e,""),e.parent("div").attr("style","margin-top:-8px;").parent("div").attr("style","height: 212px;").prev("div").attr("style","width: 100%; background-color: rgba(255, 255, 255, 0.3); position: absolute; height: 200px;"),!0)},isRadioSelected:function(t,e){return!t.is(":visible")||(""==t.find(":radio:checked").val()||void 0===t.find(":radio:checked").val()?(this.addErrorStyle(t),this.updateText(e,"Bitte w&auml;hlen Sie einen Wert im markierten Bereich aus!"),!1):(this.removeErrorStyle(t),this.updateText(e),!0))}},Konto={View:{initializeFirst:function(){$(".bestellungen-table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/German.json"},order:[[2,"desc"]],bProcessing:!0,bDeferRender:!0,bAutoWidth:!1,bJQueryUI:!0,columnDefs:[{type:"natural",targets:0},{type:"de_datetime",targets:1}]}),$("#customer-notice-table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/German.json"},order:[[2,"desc"]],bProcessing:!0,bDeferRender:!0,bAutoWidth:!1,bJQueryUI:!0,columnDefs:[{type:"natural",targets:0},{type:"de_datetime",targets:2},{type:"de_datetime",targets:3}]}),$(".adressen-table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/German.json"},order:[[2,"desc"]],bProcessing:!0,bDeferRender:!0,bAutoWidth:!1,bJQueryUI:!0,columnDefs:[{type:"natural",targets:0},{type:"natural",targets:1},{type:"natural",targets:2}]}),$("#add-Notice-To-Order-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",modal:!0,buttons:{Ja:function(){var t=new Object;t.eID="ajaxDispatcher",t.request={pluginName:"Glacrylshop",controller:"Aj",action:"clearFromNoticeList",arguments:{ids:$("#notice-position-ids-added").val()}};API.ajax(!1,t,"GET","json");$(this).dialog("close");var e=$("base").attr("href")+"shop/?tx_glshop_glacrylshop%5Baction%5D=noticelist&tx_glshop_glacrylshop%5Bcontroller%5D=Customer";window.location=e},Nein:function(){$("#notice-position-ids-added").val(""),$(this).dialog("close")}}}),$("#notice-detail-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",width:"80%",modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}}),this.Actions.initialize()},Actions:{initialize:function(){$("body").on("click",".orderNoticeBtn",Konto.View.Actions.orderFromNoticeListFunction),$("body").on("click",".noticeItem-DetailBtn",Konto.View.Actions.viewNoticeDetailFunction),$("body").on("click","#back-to-Top-Lnk",Konto.View.Actions.backToTopFunction)},viewNoticeDetailFunction:function(t){t.preventDefault();var e=new Object;e.eID="ajaxDispatcher",e.request={pluginName:"Glacrylshop",controller:"Aj",action:"getNoticeDetail",arguments:{ids:$(this).prev(".notice-positions").val()}};var a=API.ajax(!1,e,"GET","json");Konto.View.Templates.detail(a),$("#notice-detail-Dialog").dialog("open")},orderFromNoticeListFunction:function(t){var e=new Object;e.eID="ajaxDispatcher",e.request={pluginName:"Glacrylshop",controller:"Aj",action:"orderFromNoticeList",arguments:{ids:$(this).prev(".notice-positions").val()}};API.ajax(!1,e,"GET","json");$("#notice-position-ids-added").val($(this).prev(".notice-positions").val()),$("#add-Notice-To-Order-Dialog").dialog("open")},backToTopFunction:function(t){t.preventDefault();var e=$(this).attr("href");$("html, body").animate({scrollTop:$(e).offset().top},"slow")}},Templates:{detail:function(t){var e="",a="";if(t.noError){var i=t.details,r=null,n=0;for(var s in i){if(t=i[s],""==e&&(e+="<p><b>Ihre Kommission:</b> "+t.noticeName+"</p>",e+="<p><b>Angelegt am:</b> "+t.create+"</p>",e+="<p><b>G&uuml;ltig bis:</b> "+t.expire+"</p>",r=t.details),a+="<tr>",a+='<td style="text-align:center;">'+t.position+"</td>",a+='<td style="text-align:center;">'+t.qty+"</td>",a+="<td>",API.isset(t.article.schild)?a+=t.article.schild.width+" x "+t.article.schild.height+" mm":API.isset(t.article.rahmen)?a+=t.article.rahmen.width+" x "+t.article.rahmen.height+" mm":a+="&nbsp;",a+="</td>",a+='<td style="text-align:left;">',API.isset(t.article.schild)?a+="<b>"+t.article.schild.material.name+" "+t.article.schild.size+" mm "+t.article.schild.material.variante+'</b><br /> <span class="notice-detail-materialInfo">inkl. Bearbeitung</span>':API.isset(t.article.product)?a+="<b>"+t.article.product.fixing.name+'</b><br /> <span class="notice-detail-materialInfo">'+t.article.product.fixing.vName+"</span>":API.isset(t.article.rahmen)?a+="<b>"+t.article.rahmen.profil.name+" "+t.article.rahmen.profil.variantenName+'</b><br /> <span class="notice-detail-materialInfo">inkl. Bearbeitung</span>':a+="&nbsp;",a+="</td>",a+='<td style="text-align:right;">'+API.priceView(t.price)+" &euro;</td>",n+=t.price*t.qty,a+='<td class="last" style="text-align:right;">'+API.priceView(t.price*t.qty)+" &euro;</td>",a+="</tr>",a+="<tr>",a+='<td class="cell-bottom-border last" style="border-top: none;" colspan="6">',a+='<div class="row">',a+='<div class="col-md-4" style="text-align:center;">',API.isset(t.article.schild)||API.isset(t.article.rahmen))a+='<img src="typo3conf/ext/glshop/Resources/Public/Zeichnungen/'+t.pic+'" />';else if(API.isset(t.article.product)){var l=t.article.product.fixing.bild.split(".");a+='<img style="width:210px; height:210px;" src="typo3conf/ext/glshop/Resources/Public/Img/Products/mini/'+(l=l[0]+"Mini.jpg")+'" />'}if(a+="</div>",a+='<div class="col-md-8 notice-detail">',API.isset(t.article.schild)){if(a+="<dl>",a+="<dt>Kantenbearbeitung:</dt>",a+="<dd><span><span><b>"+t.article.schild.edit.border.name+"</b></span></span></dd>",a+="</dl>",a+="<dl>",a+="<dt>Tempern:</dt>",a+="<dd><span><b>"+("false"==t.article.schild.edit.tempern?"Nein":"Ja")+"</b></span></dd>",a+="</dl>",API.isset(t.article.schild.edit.corner)&&t.article.schild.edit.corner.length>0){a+="<dl>",a+="<dt>Eckbearbeitung:</dt>";for(var d in t.article.schild.edit.corner){var o=t.article.schild.edit.corner[d];a+="<dd><span><b>Ecke:</b> "+o.corner+" - <b>"+o.name+"</b>,</span> <span>"+(""!=o.radius?"<b>Radius:</b> "+o.radius+" mm":"<b>X:</b> "+o.x+" mm <b>Y:</b> "+o.y+" mm")+"</span></dd>"}a+="</dl>"}if(API.isset(t.article.schild.edit.drill)&&t.article.schild.edit.drill.length>0){a+="<dl>",a+="<dt>Bohrungen:</dt>";for(var s in t.article.schild.edit.drill){var c=t.article.schild.edit.drill[s];a+="<dd><span><b>Ecke:</b> "+("FREI"==c.corner?"E4":c.corner)+",</span> <span><b>X:</b> "+c.x+" mm,</span> <span><b>Y:</b> "+c.y+" mm , <span><b>&Oslash;-Bohrung:</b> "+c.dB+" mm</span></dd>"}a+="</dl>"}if(API.isset(t.article.schild.edit.senkDrill)&&t.article.schild.edit.senkDrill.length>0){a+="<dl>",a+="<dt>Senkbohrungen:</dt>";for(var b in t.article.schild.edit.senkDrill){var p=t.article.schild.edit.senkDrill[b];a+="<dd><span><b>Ecke:</b> "+("FREI"==p.corner?"E4":p.corner)+", </span> <span><b>X:</b> "+p.x+" mm,</span> <span><b>Y:</b> "+p.y+" mm,</span> <span><b>&Oslash;-Bohrung:</b> "+API.dotToComma(p.dB)+" mm,</span> <span><b>&Oslash;-Senkung:</b> "+API.dotToComma(p.dS)+" mm</span></dd>"}a+="</dl>"}if(API.isset(t.article.schild.fixing)&&t.article.schild.fixing.length>0){a+="<dl>",a+="<dt>Befestigung:</dt>";var h=[];for(var m in t.article.schild.fixing){var u=t.article.schild.fixing[m];API.isset(h[u.artnr])?h[u.artnr].qty=h[u.artnr].qty+1:h[u.artnr]={qty:1,halter:u}}for(var m in h){a+="<dd><span><b>"+(g=h[m]).qty+" St&uuml;ck "+g.halter.vName+"</b></span> <br/><span><b>Art.Nr.:</b> "+g.halter.artnr+"</span><br /></dd>"}a+="</dl>"}}else if(API.isset(t.article.product)){var g;a+="<dl>",a+="<dt>Befestigung:</dt>",a+="<dd>",a+="<span><b>Art.Nr.:</b> "+(g=t.article.product.fixing).artnr+"</span><br />",a+="<span><b>Material:</b> "+g.material+"</span><br />",a+="<span><b>Wandabst.:</b> "+API.dotToComma(g.wa)+" mm</span><br />";a+="<span><b>Passend f&uuml;r Materialst&auml;rken:</b> "+(1!=g.passing.sandwitch?-1==g.passing.von&&-1==g.passing.bis?"variabel":"von "+(-1==g.passing.von?"variabel":g.passing.von+" mm")+" bis "+(-1==g.passing.bis?"variabel":g.passing.bis+" mm"):"2 x "+g.passing.von+" mm")+"</span><br />",a+="<span><b>Halterma&szlig;e:</b> "+("round"==g.size.form?"&Oslash;"+API.dotToComma(g.size.size)+" mm":API.dotToComma(g.size.size)+" x "+API.dotToComma(g.size.size)+" mm")+"</span><br />",a+="</dd>",a+="</dl>"}else API.isset(t.article.rahmen)&&(a+="<dl>",a+="<dt>Maße:</dt>",a+="<dd>",a+="<span><b>Gesamtau&szlig;enma&szlig;:</b> "+t.article.rahmen.width+" x "+t.article.rahmen.height+" mm</span><br/>",a+="<span><b>Sichtbereich:</b> "+(parseInt(t.article.rahmen.width)-26)+" x "+(parseInt(t.article.rahmen.height)-26)+" mm</span><br/>",a+="</dd>",a+="</dl>",API.isset(t.article.rahmen.frontscheibe.name)&&(a+="<dl>",a+="<dt>Frontscheibe:</dt>",a+="<dd>",a+="<span><b>Material:</b> "+t.article.rahmen.frontscheibe.name+" - "+t.article.rahmen.frontscheibe.variantenName+"</span><br/>",a+="<span><b>Sicherheitseigenschaften:</b> "+(1==t.article.rahmen.frontscheibe.variantenSicherheit?"Ja":"Nein")+"</span><br/>",a+="</dd>",a+="</dl>"),a+="<dl>",a+="<dt>Beleuchtung:</dt>",a+="<dd>",a+="<span><b>Lichtfarbe:</b> "+t.article.rahmen.led.name+"</span><br/>",a+="<span><b>Steuerung:</b> ","weiß"==t.article.rahmen.led.name?a+=" Farbe fest eingestellt - "+t.article.rahmen.led.variantenName:a+=t.article.rahmen.led.variantenName,a+="</span><br/>",a+="<span><b>Verbaut in Rahmen:</b> ","true"==t.article.rahmen.kanten.K1&&(a+=" K1 "),"true"==t.article.rahmen.kanten.K2&&(a+=" K2 "),"true"==t.article.rahmen.kanten.K3&&(a+=" K3 "),"true"==t.article.rahmen.kanten.K4&&(a+=" K4 "),a+="</span><br/>",a+="</dd>",a+="</dl>",a+="<dl>",a+="<dt>Lichtstreuplatte:</dt>",a+="<dd>",a+="<span><b>Material:</b> "+t.article.rahmen.streuplatte.variantenName+"<br/> - "+t.article.rahmen.streuplatte.name+"</span><br/>",a+="</dd>",a+="</dl>",a+="<dl>",a+="<dt>Netzanschluss:</dt>",a+="<dd>",a+="<span><b>Einbausituation:</b> "+t.article.rahmen.anschluss.variantenName+"</span><br/>",a+="<span><b>Leuchtfeldausf&uuml;hrung:</b> "+t.article.rahmen.anschluss.variantenBeschreibung+"</span><br/>",a+="</dd>",a+="</dl>",a+="<dl>",a+="<dt>Befestigung:</dt>",a+="<dd>",a+="<span><b>Montageart:</b> "+t.article.rahmen.befestigung.name+"</span><br/>",a+="<span><b>Zubeh&ouml;r:</b> "+t.article.rahmen.befestigung.beschreibung+"</span><br/>",a+="<span><b>Vertiefung:</b> "+t.article.rahmen.befestigung.variantenName+"</span><br/>",a+="</dd>",a+="</dl>");a+="</div>",a+="</div>",a+="</td>",a+="</tr>"}var f=n,v="<tr>";if(v+='<td colspan="5" style="text-align:right;"><b>Zwischensumme</b></td>',v+='<td class="cell-bottom-border last" style="text-align:right;"><b>'+API.priceView(n)+" &euro;</b></td>",v+="</tr>",0!=r.rabatt&&(v+="<tr>",v+='<td colspan="5" style="text-align:right;">- Sondernachlass</td>',v+='<td class="cell-bottom-border last" style="text-align:right;">'+API.priceView(r.rabatt)+" &euro;</td>",f-=r.rabatt,v+="</tr>"),0!=r.ewPalette&&(v+="<tr>",v+='<td colspan="5" style="text-align:right;">+ Aufpreis für Einwegpalette</td>',v+='<td class="cell-bottom-border last" style="text-align:right;">'+API.priceView(r.ewPalette)+" &euro;</td>",f+=r.ewPalette,v+="</tr>"),0==r.rabatt&&0==r.ewPalette||(v+="<tr>",v+='<td colspan="5" style="text-align:right;"><b>Zwischensumme</b></td>',v+='<td  class="cell-bottom-border last" style="text-align:right;"><b>'+API.priceView(f)+" &euro;</b></td>",v+="</tr>"),0!=r.werbelandRabatt||0!=r.werbelandRabatt){v+="<tr>",v+='<td colspan="5" style="text-align:right;">- Werbelandrabatt ('+r.werbelandRabatt+"%)</td>";var x=API.round(f*r.werbelandRabatt/100,2);v+='<td class="cell-bottom-border last" style="text-align:right;">'+API.priceView(x)+" &euro;</td>",f-=x,v+="</tr>",v+="<tr>",v+='<td colspan="5" style="text-align:right;"><b>Zwischensumme</b></td>',v+='<td  class="cell-bottom-border last" style="text-align:right;"><b>'+API.priceView(f)+" &euro;</b></td>",v+="</tr>"}v+="<tr>",v+='<td colspan="5" style="text-align:right;">+ MwSt (19%)</td>';var y=19*f/100;v+='<td class="cell-bottom-border last" style="text-align:right;">'+API.priceView(y)+" &euro;</td>",v+="</tr>",v+="<tr>",v+='<td class="cell-bottom-border" colspan="5" style="text-align:right;"><b>Summe</b></td>',v+='<td class="cell-bottom-border last" style="text-align:right;"><b>'+API.priceView(f+y)+" &euro;</b></td>",v+="</tr>",$("#notice-detail-header").html(e),$("#notice-detail-table tbody").html(a),$("#notice-detail-table tfoot").html(v)}}}}};$(function(){Konto.View.initializeFirst()})}(jQuery);