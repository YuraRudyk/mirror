function log(){}!function($){function Kanten(){this.kante=["Links","Oben","Rechts","Unten"];var e=!1,t=!1,r=!1,i=!1;this.setKante=function(n){switch(n){case"Links":e=!0;break;case"Oben":t=!0;break;case"Rechts":r=!0;break;case"Unten":i=!0}},this.isKanteSet=function(n){switch(n){case"Links":return e;case"Oben":return t;case"Rechts":return r;case"Unten":return i}},this.areSomeKantenSet=function(){var n=!1;return e&&(n=!0),t&&(n=!0),r&&(n=!0),i&&(n=!0),n},this.unSetKante=function(n){switch(n){case"Links":e=!1;break;case"Oben":t=!1;break;case"Rechts":r=!1;break;case"Unten":i=!1;break;case"ALLE":e=!1,t=!1,r=!1,i=!1}},this.getKanten=function(){return{Links:e,Oben:t,Rechts:r,Unten:i}}}var InputFieldTest={start:function(){var e=$(document).find("input[type=text]"),t=API.isDesktopTest();$.each(e,function(e,r){t?$(r).attr("type","text").attr("maxlength",4):$(r).attr("type","number").removeAttr("maxlength")})}},Tooltips={tips:{".right.info-icon.profil":"#profil-info-tooltip",".right.info-icon.front":"#front-info-tooltip",".right.info-icon.led":"#led-info-tooltip",".right.info-icon.streuplatte":"#streuplatte-info-tooltip",".right.info-icon.anschluss":"#anschluss-info-tooltip",".right.info-icon.montage":"#montage-info-tooltip"},initialize:function(){$(".info-icon").each(function(){$(this).qtip({overwrite:!1,position:{my:"top right",at:"center left",adjust:{method:"shift",resize:!0,scroll:!1},viewport:$(window)},style:{widget:!0,def:!1},content:{text:$(Tooltips.getTooltipId($(this))).html(),button:!0},hide:{event:function(){return Tooltips.clearInfo(),API.MobileCheck()?!1:"mouseleave"}()},events:{show:function(e,t){var r="."+$(e.originalEvent.target).attr("class").replace(" ",".").replace(" ",".");if(".right.info-icon.mat"==r){var i=$(e.originalEvent.target);Tooltips.insertInfo(r,i)}else Tooltips.insertInfo(r)}}})})},getTooltipId:function(e){var t="."+e.attr("class").replace(" ",".").replace(" ",".");return Tooltips.tips[t]},clearInfo:function(){$("span.tooltip-halter-name").html(""),$("span.tooltip-halter-variante").html(""),$("span.tooltip-halter-artNr").html(""),$("span.tooltip-halter-preis").html(""),$("span.tooltip-halter-wa").html(""),$("span.tooltip-halter-material").html(""),$("span.tooltip-halter-mas").html(""),$("span.tooltip-halter-bohrung").html(""),$("p.tooltip-material-info").html(""),$("span.tooltip-material-name").html("")},insertInfo:function(e,t){switch(e){case".right.info-icon.mat":var r=t.parent("div").next("div").find("div").find("input[name=materialUid]").val(),i=t.parent("div").next("div").find("div").find("input[name=variantenUid]").val();API.isset(i)||(i=t.parent("div").next("div").find("div").find("select").val());var n=Konfigurator.helper.getMaterial(r,i);$("span.tooltip-material-name").html(n.material.name),$("p.tooltip-material-info").html(n.material.desc);break;case".info-icon-halter.eHmB":var a=$("#view-halterMitBohrung-auswahl select").val(),i=$("#view-halterMitBohrung-variantenId").val(),o=Konfigurator.helper.getHalter(a,i),s="0.00"!=o.variante.durchmesser?"&Oslash; "+API.dotToComma(o.variante.durchmesser):API.dotToComma(o.variante.halterkantenlaenge)+" x "+API.dotToComma(o.variante.halterkantenlaenge),n="-1.00"!=o.variante.materialVon&&"-1.00"!=o.variante.materialBis?"von "+API.dotToComma(o.variante.materialVon)+" bis "+API.dotToComma(o.variante.materialBis)+" mm":"alle";$("span.tooltip-halter-name").html(o.halter.name),$("span.tooltip-halter-variante").html(o.variante.name),$("span.tooltip-halter-artNr").html(o.variante.artnr),$("span.tooltip-halter-preis").html(API.dotToComma(o.variante.preis)),$("span.tooltip-halter-wa").html(API.dotToComma(o.variante.wandabstand)),$("span.tooltip-halter-material").html(n),$("span.tooltip-halter-mas").html(s),$("span.tooltip-halter-bohrung").html(API.dotToComma(o.variante.plattenbohrungUnterseite));break;case".info-icon-halter.eHoB":var a=$("#view-halterOhneBohrung-auswahl select").val(),i=$("#view-halterOhneBohrung-variantenId").val(),o=Konfigurator.helper.getHalter(a,i),s="0.00"!=o.variante.durchmesser?"&Oslash; "+API.dotToComma(o.variante.durchmesser):API.dotToComma(o.variante.halterkantenlaenge)+" x "+API.dotToComma(o.variante.halterkantenlaenge),n="-1.00"!=o.variante.materialVon&&"-1.00"!=o.variante.materialBis?"von "+API.dotToComma(o.variante.materialVon)+" bis "+API.dotToComma(o.variante.materialBis)+" mm":"alle";$("span.tooltip-halter-name").html(o.halter.name),$("span.tooltip-halter-variante").html(o.variante.name),$("span.tooltip-halter-artNr").html(o.variante.artnr),$("span.tooltip-halter-preis").html(API.dotToComma(o.variante.preis)),$("span.tooltip-halter-wa").html(API.dotToComma(o.variante.wandabstand)),$("span.tooltip-halter-material").html(n),$("span.tooltip-halter-mas").html(s)}}},Dispatcher={Type:{Main:1,Profil:2,Frontscheibe:3,LED:4,Streuplatte:5,Anschluss:6,Montage:7,Kanten:8,Steuerung:9,Width:10,Height:11},errorFields:{Main:new Array,Profil:new Array,Frontscheibe:new Array,LED:new Array,Streuplatte:new Array,Anschluss:new Array,Montage:new Array,Width:new Array,Height:new Array},getErrorField:function(e){switch(e){case 1:return this.errorFields.Main;case 2:return this.errorFields.Profil;case 3:return this.errorFields.Frontscheibe;case 4:return this.errorFields.LED;case 5:return this.errorFields.Streuplatte;case 6:return this.errorFields.Anschluss;case 7:return this.errorFields.Montage;case 10:return this.errorFields.Width;case 11:return this.errorFields.Height}},addErrorField:function(e,t){switch(e){case 1:this.errorFields.Main.push(t);break;case 2:this.errorFields.Profil.push(t);break;case 3:this.errorFields.Frontscheibe.push(t);break;case 4:this.errorFields.LED.push(t);break;case 5:this.errorFields.Streuplatte.push(t);break;case 6:this.errorFields.Anschluss.push(t);break;case 7:this.errorFields.Montage.push(t);break;case 10:this.errorFields.Width.push(t);break;case 11:this.errorFields.Height.push(t)}return this},clearErrorFields:function(e){switch(e){case 1:$.each(this.errorFields.Main,function(e,t){$(t).html("")}),this.errorFields.Main=new Array;break;case 2:$.each(this.errorFields.Profil,function(e,t){$(t).html("")}),this.errorFields.Profil=new Array;break;case 3:$.each(this.errorFields.Frontscheibe,function(e,t){$(t).html("")}),this.errorFields.Frontscheibe=new Array;break;case 4:$.each(this.errorFields.LED,function(e,t){$(t).html("")}),this.errorFields.LED=new Array;break;case 5:$.each(this.errorFields.Streuplatte,function(e,t){$(t).html("")}),this.errorFields.Streuplatte=new Array;break;case 6:$.each(this.errorFields.Anschluss,function(e,t){$(t).html("")}),this.errorFields.Anschluss=new Array;break;case 7:$.each(this.errorFields.Montage,function(e,t){$(t).html("")}),this.errorFields.Montage=new Array;break;case 10:$.each(this.errorFields.Width,function(e,t){$(t).html("")}),this.errorFields.Width=new Array;break;case 11:$.each(this.errorFields.Height,function(e,t){$(t).html("")}),this.errorFields.Height=new Array}return this},transition:{},clearTransition:function(){},configErrors:{Befestigung:{text:"Bitte w&auml;hlen Sie Ihre Befestigungsvariante aus!",set:!1},Frontscheibe:{text:"Bitte w&auml;hlen Sie eine Frontscheibe aus!",set:!1},Kanten:{text:"Bitte geben Sie an in welchen Rahmen die LED's verbaut werden sollen!",set:!1},LED:{text:"Bitte w&auml;hlen Sie Ihre LED-Variante aus!",set:!1},Steuerung:{text:"Bitte w&auml;hlen Sie eine Steuerung aus!",set:!1},Anschluss:{text:"Bitte w&auml;hlen Sie Ihre Netzanschlussart aus!",set:!1},Profil:{text:"Bitte w&auml;hlen Sie Ihre Profilvariante aus!",set:!1},Streuplatte:{text:"Bitte w&auml;hlen Sie Ihre Lichtstreuplatte aus!",set:!1}},setConfigError:function(e){switch(e){case 1:break;case 2:Dispatcher.configErrors.Profil.set=!0;break;case 3:Dispatcher.configErrors.Frontscheibe.set=!0;break;case 4:Dispatcher.configErrors.LED.set=!0;break;case 5:Dispatcher.configErrors.Streuplatte.set=!0;break;case 6:Dispatcher.configErrors.Anschluss.set=!0;break;case 7:Dispatcher.configErrors.Befestigung.set=!0;break;case 8:Dispatcher.configErrors.Kanten.set=!0;break;case 9:Dispatcher.configErrors.Steuerung.set=!0}},unSetConfigError:function(e){switch(e){case 1:break;case 2:Dispatcher.configErrors.Profil.set=!1;break;case 3:Dispatcher.configErrors.Frontscheibe.set=!1;break;case 4:Dispatcher.configErrors.LED.set=!1;break;case 5:Dispatcher.configErrors.Streuplatte.set=!1;break;case 6:Dispatcher.configErrors.Anschluss.set=!1;break;case 7:Dispatcher.configErrors.Befestigung.set=!1;break;case 8:Dispatcher.configErrors.Kanten.set=!1;break;case 9:Dispatcher.configErrors.Steuerung.set=!1}this.createErrorView()},createErrorView:function(){var e="";this.configErrors.Profil.set&&(e+="<span>"+this.configErrors.Profil.text+"</span><br />"),this.configErrors.Frontscheibe.set&&(e+="<span>"+this.configErrors.Frontscheibe.text+"</span><br />"),this.configErrors.LED.set&&(e+="<span>"+this.configErrors.LED.text+"</span><br />"),this.configErrors.Steuerung.set&&(e+="<span>"+this.configErrors.Steuerung.text+"</span><br />"),this.configErrors.Streuplatte.set&&(e+="<span>"+this.configErrors.Streuplatte.text+"</span><br />"),this.configErrors.Kanten.set&&(e+="<span>"+this.configErrors.Kanten.text+"</span><br />"),this.configErrors.Anschluss.set&&(e+="<span>"+this.configErrors.Anschluss.text+"</span><br />"),this.configErrors.Befestigung.set&&(e+="<span>"+this.configErrors.Befestigung.text+"</span><br />"),$(".configError").html(e)}},API={usedIds:new Array,isMobile:window.matchMedia("only screen and (max-width: 750px)").matches,isTablet:window.matchMedia("only screen and (max-width: 974px)").matches,isDesktop:window.matchMedia("only screen and (min-width: 975px)").matches,MobileCheck:function(){return this.isMobileNew.any()&&this.isMobileEvent()},isMobileEvent:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},isMobileNew:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return API.isMobileNew.Android()||API.isMobileNew.BlackBerry()||API.isMobileNew.iOS()||API.isMobileNew.Opera()||API.isMobileNew.Windows()}},isMobileTest:function(){var e=parseInt($(window).width());return 750>=e?!0:!1},isTabletTest:function(){var e=parseInt($(window).width());return 974>=e?!0:!1},isDesktopTest:function(){var e=parseInt($(window).width());return e>=975?!0:!1},createRandomNumber:function(){var e=Math.floor(10002*Math.random()+1);return-1==$.inArray(e,this.usedIds)?(this.usedIds.push(e),e):this.createRandomNumber()},ajax:function(async,data,type,dataType,sMsg,eMsg){var res=$.ajax({url:"index.php",async:async,global:!1,data:data,type:type,dataType:dataType,success:function(){null!=sMsg&&alert(sMsg)},error:function(){null!=eMsg&&alert(eMsg)}}).responseText;return"json"==dataType&&""!=res&&null!=res&&res.length>0&&(res=eval("("+res+")")),res},dotToComma:function(e){return e+="",e=e.replace(".",",")},commaToDot:function(e){return e+="",e=e.replace(".",""),e=e.replace(",",".")},markEckenOption:function(e,t){var r=e.find("option"),i=t.val();"ALLE"==i?$(t)[0].selected?$.each(r,function(t,r){var i=$(r).val();"ALLE"!=i&&($(r).removeAttr("selected"),e.selectmenu("refresh",!0))}):$.each(r,function(e,t){var r=$(t).val();"ALLE"!=r&&"FREI"!=r?API.isset($(t).attr("disabled"))||$(t).attr("selected","selected"):"FREI"==r&&$(t).removeAttr("selected")}):"FREI"==i?$.each(r,function(e,t){"FREI"!=$(t).val()&&$(t).removeAttr("selected")}):"ALLE"!=i&&"FREI"!=i&&$.each(r,function(e,t){("ALLE"==$(t).val()||"FREI"==$(t).val())&&$(t).removeAttr("selected")})},markEckenCheckbox:function(e){var t=$(e.target.parentElement).find("label"),r=$(e.target),i=r.find("input").val();if("ALLE"==i){var n=!1;API.MobileCheck()?r.hasClass("active")&&(n=!0):r.hasClass("active")||(n=!0),n?$.each(t,function(e,t){var r=$(t).find("input").val();"ALLE"!=r&&$(t).removeClass("active")}):$.each(t,function(e,t){var r=$(t).find("input").val();"ALLE"!=r&&"FREI"!=r?API.isset($(t).attr("disabled"))||$(t).addClass("active"):"FREI"==r&&$(t).removeClass("active")})}else"FREI"==i?$.each(t,function(e,t){"FREI"!=$(t).find("input").val()&&$(t).removeClass("active")}):"ALLE"!=i&&"FREI"!=i&&$.each(t,function(e,t){("ALLE"==$(t).find("input").val()||"FREI"==$(t).find("input").val())&&$(t).removeClass("active")})},disableOption:function(e){$(e).attr("disabled","disabled")},disableCheckBox:function(e){$(e).attr("disabled","disabled")},activateCheckBox:function(e){$(e).addClass("active")},deactivateCheckBox:function(e){$(e).removeClass("active")},disableButton:function(e){$(e).prop("disabled",!0)},enableButton:function(e){$(e).prop("disabled",!1)},round:function(e,t){if(1>t||t>14)return!1;var r=Math.pow(10,t),i=(Math.round(e*r)/r).toString();return-1==i.indexOf(".")&&(i+="."),i+=r.toString().substring(1),parseFloat(i.substring(0,i.indexOf(".")+t+1))},priceView:function(e){function t(e,t,n){t||(t=0);var a="",o=0>e?"-":"",s=Math.pow(10,t),l=Math.abs(e);l=""+parseInt(l*s+.5)/s;var u=l.indexOf(".");for(n&&t&&(l+=(-1==u?".":"")+s.toString().substring(1)),u=l.indexOf("."),-1==u?u=l.length:a=r+l.substr(u+1,t);u>0;)a=u-3>0?i+l.substring(u-3,u)+a:l.substring(0,u)+a,u-=3;return o+a}var r=",",i=".";return t(e,2,!0)},isset:function(e){return"undefined"!=typeof e&&null!=e?!0:!1}},Validate={config:{regexp:{ganzeZahl:{exp:/^([0-9_])+$/i,text:"Dieses Feld darf nur ganze Zahlen enthalten!"}},rahmen:{max1:3e3,max2:1200,minH:140,minB:205},maxQty:100},updateText:function(e,t){t?$(e).show().html(t):$(e).hide().html("")},addErrorStyle:function(e){e.attr("style","border: 1px solid #A51107 !important; color: #A51107 !important; overflow:hidden; padding:0px !important;")},removeErrorStyle:function(e){e.removeAttr("style")},emptyField:function(e,t){var r=[];for(var i in e)""==e[i].val()&&r.push(i);if(r.length>1){for(var n="Die Felder ",a=0;a<r.length;a++)n+=0==a?'"'+r[a]+'"':', "'+r[a]+'"';return n+=" d&uuml;rfen nicht leer sein!",this.updateText(t,n),!1}return 1==r.length?(this.updateText(t,'Das Feld "'+r[0]+'" darf nicht leer sein!'),!1):(this.updateText(t,""),!0)},checkRegexp:function(e,t){var r=this.config.regexp.ganzeZahl.exp,i=this.config.regexp.ganzeZahl.text;return e.is(":visible")?r.test(Number(e.val()))?(this.removeErrorStyle(e),this.updateText(t,""),!0):(this.addErrorStyle(e),this.updateText(t,i),!1):(this.removeErrorStyle(0),this.updateText(t,""),!0)},checkNumber:function(e,t,r){if(e.is(":visible")){var i=e.val();return isNaN(i)?(this.addErrorStyle(e),this.updateText(t,"Bitte geben Sie in das markierte Feld eine Zahl ein!"),!1):0!=i||r?(this.removeErrorStyle(e),this.updateText(t,""),!0):(this.addErrorStyle(e),this.updateText(t,'Das markierte Feld  darf nicht "0" sein!'),!1)}return this.removeErrorStyle(0),this.updateText(t,""),!0},isRadioSelected:function(e,t){return e.is(":visible")?""==e.find(":radio:checked").val()||"undefined"==typeof e.find(":radio:checked").val()?(this.addErrorStyle(e),this.updateText(t,"Bitte w&auml;hlen Sie einen Wert im markierten Bereich aus!"),!1):(this.removeErrorStyle(e),this.updateText(t),!0):!0},isButtonSelected:function(e,t){return e.is(":visible")?""==e.find("button.active").val()||"undefined"==typeof e.find("button.active").val()?(this.addErrorStyle(e),this.updateText(t,"Bitte w&auml;hlen Sie einen Wert im markierten Bereich aus!"),!1):(this.removeErrorStyle(e),this.updateText(t),!0):!0},isCheckboxSelected:function(e,t){return e.is(":visible")?0==e.find("label.active").length||"undefined"==typeof e.find("label.active")?(this.addErrorStyle(e),this.updateText(t,"Bitte w&auml;hlen Sie einen Wert im markierten Bereich aus!"),!1):(this.removeErrorStyle(e),this.updateText(t),!0):!0},isOptionSet:function(e,t){return e.is(":visible")?"choose"==e.val()?(this.addErrorStyle(e),this.updateText(t,"Bitte w&auml;hlen Sie eine Option im markierten Bereich aus!"),!1):(this.removeErrorStyle(e),this.updateText(t),!0):!0},allDataSet:function(e){var t=!0,r=Konfigurator.helper.getProfil(e.profil.uid,e.profil.vid);if(API.isset(e.befestigung.vid)||(Dispatcher.setConfigError(Dispatcher.Type.Montage),t=!1),API.isset(r.profil)&&1==r.profil.frontscheibe)if(API.isset(e.frontscheibe.uid)){if(!API.isset(e.frontscheibe.vid)){var i=Konfigurator.helper.getFrontscheibe(e.frontscheibe.uid,e.frontscheibe.vid);"KD4"==i.frontscheibe.artNr||"KD5"==i.frontscheibe.artNr?Dispatcher.unSetConfigError(Dispatcher.Type.Frontscheibe):(Dispatcher.setConfigError(Dispatcher.Type.Frontscheibe),t=!1)}}else Dispatcher.setConfigError(Dispatcher.Type.Frontscheibe),t=!1;var n=!1;for(var a in e.kanten)1==e.kanten[a]&&(n=!0);return n||(Dispatcher.setConfigError(Dispatcher.Type.Kanten),t=!1),API.isset(e.led.uid)||(Dispatcher.setConfigError(Dispatcher.Type.LED),t=!1),API.isset(e.led.vid)||(Dispatcher.setConfigError(Dispatcher.Type.Steuerung),t=!1),API.isset(e.netzanschluss.vid)||(Dispatcher.setConfigError(Dispatcher.Type.Anschluss),t=!1),API.isset(e.profil.vid)||(Dispatcher.setConfigError(Dispatcher.Type.Profil),t=!1),API.isset(e.streuplatte.vid)||(Dispatcher.setConfigError(Dispatcher.Type.Streuplatte),t=!1),t},isLedSet:function(e,t){return API.isset(e)?(Dispatcher.clearErrorFields(Dispatcher.Type.LED),!0):(this.updateText(t,"Bitte w&auml;hlen Sie zuerst eine Lichtfarbe aus!"),Dispatcher.addErrorField(Dispatcher.Type.LED,t),!1)},isStreuplatteSet:function(e,t){return API.isset(e)?(Dispatcher.clearErrorFields(Dispatcher.Type.Streuplatte),!0):(this.updateText(t,"Bitte w&auml;hlen Sie zuerst eine Lichtstreuplatte aus!"),Dispatcher.addErrorField(Dispatcher.Type.Streuplatte,t),!1)},isRahmenSet:function(e,t){return API.isset(e)?(Dispatcher.clearErrorFields(Dispatcher.Type.Streuplatte),!0):(this.updateText(t,"Bitte w&auml;hlen Sie zuerst eine Profilvariante aus!"),Dispatcher.addErrorField(Dispatcher.Type.Streuplatte,t),!1)},isAnschlussSet:function(e,t,r){return API.isset(t.variante)?(Dispatcher.clearErrorFields(Dispatcher.Type.Montage),this.removeErrorStyle(e),!0):(this.updateText(r,"Bitte w&auml;hlen Sie zuerst einen Netzanschluss aus!"),this.addErrorStyle(e),Dispatcher.addErrorField(Dispatcher.Type.Montage,r),!1)},mainSet:function(e,t,r){var i=$("#view-configuration-width"),n=$("#view-configuration-height");if(0==e||0==t){if(0==e)return this.updateText(r,"Bitte geben Sie die richtige Breite im markierten Feld ein!"),this.addErrorStyle(i),Dispatcher.addErrorField(Dispatcher.Type.Profil,r),!1;if(0==t)return this.updateText(r,"Bitte geben Sie die richtige H&ouml;he im markierten Feld ein!"),this.addErrorStyle(n),Dispatcher.addErrorField(Dispatcher.Type.Profil,r),!1}return Dispatcher.clearErrorFields(Dispatcher.Type.Profil),!0},rahmenWidth:function(e,t,r){var i=Number(e.val()),n=this.config.rahmen.minB,a=this.config.rahmen.max1,o=this.config.rahmen.max2,s=Number(Grundeinstellung.current.height);if(0==i)return this.addErrorStyle(e),this.updateText(r,"Bitte geben Sie eine Zahl ein!"),Dispatcher.addErrorField(Dispatcher.Type.Width,r),!1;if(n>i)return this.updateText(r,'Das Feld "Breite" darf den Minimalwert von '+n+" mm nicht unterschreiten!"),this.addErrorStyle(e),Dispatcher.addErrorField(Dispatcher.Type.Width,r),!1;if(0==s){if(i>a)return this.updateText(r,'Das Feld "Breite" darf den Maximalwert von '+a+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(e),Dispatcher.addErrorField(Dispatcher.Type.Width,r),!1}else if(s>o){if(i>o)return this.updateText(r,'Das Feld "Breite" darf den Maximalwert von '+o+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(e),Dispatcher.addErrorField(Dispatcher.Type.Width,r),!1}else if(i>a)return this.updateText(r,'Das Feld "Breite" darf den Maximalwert von '+a+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(e),Dispatcher.addErrorField(Dispatcher.Type.Width,r),!1;return this.removeErrorStyle(e),Dispatcher.clearErrorFields(Dispatcher.Type.Width),Dispatcher.getErrorField(Dispatcher.Type.Height).lenght>0&&Validate.rahmenHeight(e,t,r),!0},rahmenHeight:function(e,t,r){var i=Number(t.val()),n=this.config.rahmen.minH,a=this.config.rahmen.max1,o=this.config.rahmen.max2,s=Number(Grundeinstellung.current.width);if(0==i)return this.addErrorStyle(t),this.updateText(r,"Bitte geben Sie eine Zahl ein!"),Dispatcher.addErrorField(Dispatcher.Type.Height,r),!1;if(n>i)return this.updateText(r,'Das Feld "H&ouml;he" darf den Minimalwert von '+n+" mm nicht unterschreiten!"),this.addErrorStyle(t),Dispatcher.addErrorField(Dispatcher.Type.Height,r),!1;if(0==s){if(i>a)return this.updateText(r,'Das Feld "H&ouml;he" darf den Maximalwert von '+a+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(t),Dispatcher.addErrorField(Dispatcher.Type.Height,r),!1}else if(s>o){if(i>o)return this.updateText(r,'Das Feld "H&ouml;he" darf den Maximalwert von '+o+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(t),Dispatcher.addErrorField(Dispatcher.Type.Height,r),!1}else if(i>a)return this.updateText(r,'Das Feld "H&ouml;he" darf den Maximalwert von '+a+" mm nicht &uuml;bersreiten!"),this.addErrorStyle(t),Dispatcher.addErrorField(Dispatcher.Type.Height,r),!1;return this.removeErrorStyle(t),Dispatcher.clearErrorFields(Dispatcher.Type.Height),!0}},Price={konstanten:{arbeitsfaktor:.8,kPacket1:.655,kPacket2:15,kPallete1:1,kPallete2:20},rahmen:{faktoren:{AUXO:{EV1:{stange:2.25,fix:3.25},NIRO:{stange:2.5,fix:3.5},SW:{stange:2.25,fix:3.25},WS:{stange:2.25,fix:3.25}},THALLO:{EV1:{stange:2.25,fix:3.25},NIRO:{stange:2.5,fix:3.5},SW:{stange:2.25,fix:3.25},WS:{stange:2.25,fix:3.25}}},components:{winkelverbinder:1,haengeblech:{ohne:2,mit:4},nutenstein:4},dependencies:{trafo:{TRAFO15W:{vertiefung:!1},TRAFO30W:{vertiefung:!0},TRAFO60W:{vertiefung:!0}},anschluss:{40:{vertiefung:!1},41:{vertiefung:!0},42:{vertiefung:!0}},montage:{excenter:{ohne:2,mit:4},vertiefung:{ohne:2,mit:4}}},montage:[{bis:1,preis:40.5},{bis:2,preis:67.5},{bis:3,preis:79.8}],zuschnitt:[{bis:2,preis:18},{bis:5,preis:14.5},{bis:10,preis:10.7},{ab:10,preis:9.6}]},createPriceView:function(){var e=parseInt(Grundeinstellung.getCurrentConfiguration().qty),t=parseFloat(this.calculate()),r=API.round(t/e,2);$("#cart-configuration-qty").html(e+" Stk."),$("#cart-configuration-onePrice").html("&aacute;  "+API.priceView(r)+" &euro; netto"),$(".cart-configuration-sumPrice").html(API.priceView(r*e)+" &euro;")},calculate:function(){var e=0,t=Number(Grundeinstellung.getCurrentConfiguration().qty),r=Number(Grundeinstellung.getCurrentConfiguration().width),i=Number(Grundeinstellung.getCurrentConfiguration().height);return API.isset(Leuchtrahmen.Profile.getCurrentConfiguration().uid)&&0!=r&&0!=i&&(e+=this.getRahmenPreis(t,r,i),e+=this.getFrontscheibenPreis(t,r,i),e+=this.getRueckwandPreis(t,r,i),e+=this.getZubehoerPreis(t),e+=this.getLEDPreis(t,r,i),e+=this.getStreuplattenPreis(t,r,i),e+=this.getNetzanschlussPreis(t),e+=this.getMontagePreis(t),e+=this.getZuschnittPreis(t),e+=this.getZusammenbauPreis(t,r,i),e+=this.berechnePacken(t,r,i),e=this.getRabatt(t)*e),API.round(e,2)},getRabatt:function(e){var t=.9922*Math.pow(e,-.064);return API.round(t,2)},getZuschnittPreis:function(e){for(var t=this.rahmen.zuschnitt,r=0,i=0;i<t.length;i++)if(API.isset(t[i].bis)){if(e<Number(t[i].bis)){r=t[i].preis*e;break}}else if(e>=Number(t[i].ab)){r=t[i].preis*e;break}return API.round(r,2)},getZusammenbauPreis:function(e,t,r){for(var i=this.rahmen.montage,n=t*r/1e6,a=0,o=0;o<i.length;o++)if(n<Number(i[o].bis)){a=i[o].preis*e;break}return API.round(a,2)},getRahmenPreis:function(e,t,r){var i=Leuchtrahmen.Profile.getCurrentConfiguration(),n=Konfigurator.helper.getProfil(i.uid,i.vid),a=0,o=0,s=2*(t+r)/1e3;if(API.isset(n.variante)){var l=n.variante.preis;a=this.rahmen.faktoren[n.profil.artNr][n.variante.artNr].fix,o+=l*a*s*e}return API.round(o,2)},getFrontscheibenPreis:function(e,t,r){var i=Leuchtrahmen.Frontscheiben.getCurrentConfiguration(),n=Konfigurator.helper.getFrontscheibe(i.uid,i.vid),a=0,o=t*r/1e6;return API.isset(n.variante)&&(a+=o*n.variante.preis*e),API.round(a,2)},getRueckwandPreis:function(e,t,r){var i=0,n=Konfigurator.data.rueckwand,a=t*r/1e6;return i+=n[0].preis*a*e,API.round(i,2)},getZubehoerPreis:function(e){var t=0,r=this.rahmen.components,i=Konfigurator.data.zubehoer[0];return t+=r.winkelverbinder*e*i.variante[4].preis,t+=r.nutenstein*e*i.variante[1].preis,API.round(t,2)},getLEDPreis:function(e,t,r){var i=Beleuchtung.LED.getCurrentConfiguration(),n=Konfigurator.helper.getLed(i.uid,i.vid),a=0,o=0,s=i.kanten.getKanten();if(API.isset(n.variante)){s.Links&&(o+=r),s.Oben&&(o+=t),s.Rechts&&(o+=r),s.Unten&&(o+=t),o/=1e3,a+=n.variante.preis*e;for(var l=[{bis:1,preis:18},{bis:2,preis:36},{bis:3,preis:54},{bis:4,preis:72},{bis:6,preis:48},{ab:6,preis:18}],u=0,c=0;c<l.length;c++)if(API.isset(l[c].bis)){if(o<=Number(l[c].bis)){u=l[c].preis*e;break}}else if(o>Number(l[c].ab)){u=l[c].preis*o*e;break}a+=u,a+=n.led.preis*o*e}return API.round(a,2)},getStreuplattenPreis:function(e,t,r){var i=Beleuchtung.Streuplatte.getCurrentConfiguration(),n=Konfigurator.helper.getStreuplatte(i.uid,i.vid),a=0,o=t*r/1e6;return API.isset(n.variante)&&(a+=n.variante.preis*o*e),API.round(a,2)},getNetzanschlussPreis:function(e){var t=Beleuchtung.Netzanschluss.getCurrentConfiguration(),r=Konfigurator.helper.getAnschluss(t.uid,t.vid),i=0;return API.isset(r.variante)&&(i+=r.variante.preis*e),API.round(i,2)},getMontagePreis:function(e){var t=Befestigung.Montage.getCurrentConfiguration(),r=Konfigurator.helper.getBefestigung(t.uid,t.vid),i=0,n=Konfigurator.data.zubehoer[0],a=0,o=!1;return API.isset(r.variante)&&("WAMONOHNEABH"==r.montage.artNr?(a=2,o="OHNEEXCEN2"==r.variante.artNr?!1:!0):(a=4,o="OHNEEXCEN4"==r.variante.artNr?!1:!0),o?(i+=a*e*n.variante[0].preis,i+=a*e*n.variante[2].preis,i+=a*e*n.variante[3].preis):(i+=a*e*n.variante[0].preis,i+=a*e*n.variante[2].preis)),API.round(i,2)},berechnePacken:function(e,t,r){var i=0,n=0,a=60,o=60,s=0;t>r?(a+=t,o+=r):(a+=r,o+=t),s+=35*e;var l=a*o/1e6;return n+=25*l*e,n>38||a+2*o+2*s>3e3?(a>1200&&o>800&&(i+=40),i+=Price.konstanten.kPallete1*e+Price.konstanten.kPallete2):i=Price.konstanten.kPacket1*e*(a*o/1e6)+Price.konstanten.kPacket2,API.round(i*Price.konstanten.arbeitsfaktor,2)}},Grundeinstellung={rahmen:null,current:{qty:0,width:0,height:0},setQty:function(e){return this.current.qty=e,Grundeinstellung.helper.view.createView(),this},setWidth:function(e){return this.current.width=e,Grundeinstellung.helper.view.createView(),this},setHeight:function(e){return this.current.height=e,Grundeinstellung.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setQty(1).setWidth(0).setHeight(0),this},getCurrentConfiguration:function(){return this.current},helper:{view:{createView:function(){$("#view-configuration-size span").html(Grundeinstellung.current.width+" x "+Grundeinstellung.current.height+" mm")},createPriceView:function(){Price.createPriceView()},clearView:function(){Grundeinstellung.clearCurrentConfiguration(),Leuchtrahmen.Profile.helper.view.clearView(),Leuchtrahmen.Frontscheiben.helper.view.clearView(),Beleuchtung.LED.helper.view.clearView(),Beleuchtung.Netzanschluss.helper.view.clearView(),Beleuchtung.Streuplatte.helper.view.clearView(),Befestigung.Montage.helper.view.clearView(),Grundeinstellung.helper.view.createView()},iniCanvas:function(){Grundeinstellung.rahmen=new Rahmen("#view-konfigurator-img",!0)},drawRahmen:function(){for(var e=Grundeinstellung.current.width,t=Grundeinstellung.current.height,r=Konfigurator.helper.getProfil(Leuchtrahmen.Profile.current.uid,Leuchtrahmen.Profile.current.vid),i=Beleuchtung.LED.current.kanten.getKanten(),n=Beleuchtung.Streuplatte.getCurrentConfiguration(),a=0,o=Konfigurator.data.streuplatten,s=0;s<o.length;s++)if(o[s].uid==n.uid)for(var l=0;l<o[s].variante.length;l++)o[s].variante[l].uid==n.vid&&(a=Number(o[s].variante[l].laenge));API.isset(r.variante)&&Grundeinstellung.rahmen.init(e,t,r.variante.artNr,13.2,a,"#F7FFA0",i)}},actions:{initialize:function(){$("body").on("click","#minusQtyBtn",Grundeinstellung.helper.actions.minusQtyFunction),$("body").on("click","#plusQtyBtn",Grundeinstellung.helper.actions.plusQtyFunction),$("body").on("keyup","#view-configuration-qty",Grundeinstellung.helper.actions.checkEnteredQtyFunction),$("body").on("keyup","#view-configuration-width",Grundeinstellung.helper.actions.checkEnteredWidthFunction),$("body").on("keyup","#view-configuration-height",Grundeinstellung.helper.actions.checkEnteredHeightFunction),$("body").on("click","#addToCartBtn",Grundeinstellung.helper.actions.addToCartFunction),$("body").on("click","#addToCartMobileBtn",Grundeinstellung.helper.actions.addToCartFunction),$("body").on("click","#editCartBtn",Grundeinstellung.helper.actions.editCartFunction),$("body").on("click","#editCartMobileBtn",Grundeinstellung.helper.actions.editCartFunction)},editCartFunction:function(e){e.preventDefault();var t=Konfigurator.getDataForCart(),r=!1,i=$("#view-konfigurator-img").getCanvasImage("png"),n=Price.calculate(),a=new Object;a.eID="ajaxDispatcher",a.request={pluginName:"Glacrylshop",controller:"Aj",action:"addToCart",arguments:{artikel:t,anzahl:t.materialConfig.qty,img:i,preis:n,posNr:Konfigurator.data.edit.posNr,schild:!0}};var r=API.ajax(!1,a,"POST","json");r?(t.materialConfig.qty>Validate.config.maxQty?($("#konfigurator-qty-warning").html(t.materialConfig.qty),$("#konfigurator-qty-Dialog").dialog("open")):$("#konfigurator-success-Dialog").dialog("open"),Konfigurator.data.edit=null,Konfigurator.resetKonfiguratorView(),View.Configuration.createView.insertGrundEinstellungenView()):$("#konfigurator-error-Dialog").dialog("open"),$("#konfigurator-img-mobile").is(":visible")&&$("#show-mobile-img-btn").trigger("click")},addToCartFunction:function(e){e.preventDefault();var t=Konfigurator.getDataForCart(),r=!1,i=!0;if(i=i&&Validate.allDataSet(t)){var n=$("#view-konfigurator-img").getCanvasImage("png"),a=Price.calculate(),o=new Object;o.eID="ajaxDispatcher",o.request={pluginName:"Glacrylshop",controller:"Aj",action:"addToCart",arguments:{artikel:t,anzahl:t.rahmenConfig.qty,img:n,preis:a,rahmen:!0}};var r=API.ajax(!1,o,"POST","json");r?(t.rahmenConfig.qty>Validate.config.maxQty?($("#konfigurator-qty-warning").html(t.rahmenConfig.qty),$("#konfigurator-qty-Dialog").dialog("open")):$("#konfigurator-success-Dialog").dialog("open"),Konfigurator.resetKonfiguratorView()):$("#konfigurator-error-Dialog").dialog("open"),$("#konfigurator-img-mobile").is(":visible")&&$("#show-mobile-img-btn").trigger("click")}else Dispatcher.createErrorView()},minusQtyFunction:function(e){e.preventDefault();var t=Number($("#view-configuration-qty").val()),r=t;t>=2&&(r=t-1),Grundeinstellung.setQty(r),$("#view-configuration-qty").val(Grundeinstellung.current.qty),Grundeinstellung.helper.view.createPriceView()},plusQtyFunction:function(e){e.preventDefault();var t=Number($("#view-configuration-qty").val()),r=t;r=9999>t?t+1:9999,Grundeinstellung.setQty(r),$("#view-configuration-qty").val(Grundeinstellung.current.qty),Grundeinstellung.helper.view.createPriceView()},checkEnteredQtyFunction:function(e){var t=Number($(this).val());Grundeinstellung.setQty(t),Grundeinstellung.helper.view.createPriceView()},checkEnteredWidthFunction:function(e){var t=$("#view-configuration-width"),r=$("#view-configuration-height"),i=t.parent("div").parent("div").parent("div").parent("div").find("div.error"),n=!0;n=n&&Validate.checkRegexp(t,i),n=n&&Validate.rahmenWidth(t,r,i),n?(Grundeinstellung.setWidth(parseInt(t.val())),Grundeinstellung.helper.view.drawRahmen(),Beleuchtung.LED.helper.view.drawRahmen(),Grundeinstellung.helper.view.createPriceView()):(Grundeinstellung.setWidth(0),Grundeinstellung.helper.view.createPriceView())},checkEnteredHeightFunction:function(e){var t=$("#view-configuration-height"),r=$("#view-configuration-width"),i=t.parent("div").parent("div").parent("div").parent("div").find("div.error"),n=!0;Dispatcher.getErrorField(Dispatcher.Type.Width).lenght>0&&(Validate.rahmenWidth(r,t,i),t.val("")),n&&(n=n&&Validate.checkRegexp(t,i),n=n&&Validate.rahmenHeight(r,t,i),
n?(Grundeinstellung.setHeight(parseInt(t.val())),Grundeinstellung.helper.view.drawRahmen(),Beleuchtung.LED.helper.view.drawRahmen(),Grundeinstellung.helper.view.createPriceView()):(Grundeinstellung.setHeight(0),Grundeinstellung.helper.view.createPriceView()))}}}},Leuchtrahmen={Profile:{current:{uid:null,vid:null},getCurrentConfiguration:function(){return this.current},setProfil:function(e){return this.current.uid=e,Leuchtrahmen.Profile.helper.view.createView(),this},setVariante:function(e){return this.current.vid=e,Leuchtrahmen.Profile.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setProfil(null).setVariante(null),this},helper:{view:{createView:function(){if(API.isset(Leuchtrahmen.Profile.current.uid)){var e=Konfigurator.helper.getProfil(Leuchtrahmen.Profile.current.uid,Leuchtrahmen.Profile.current.vid);$("#view-configuration-rahmen").html(e.profil.name+(API.isset(e.variante)?" - "+e.variante.name:""))}else $("#view-configuration-rahmen").html("Bitte Leuchtrahmen w&auml;hlen"),$("#rahmenId").val("choose"),$("#rahmenVariantenAuswahl").html("")},clearView:function(){Leuchtrahmen.Profile.clearCurrentConfiguration(),Leuchtrahmen.Profile.helper.view.createView()},createProfilVariantenView:function(e){for(var t="",r=0;r<e.length;r++)t+='<p><input class="addProfilBtn" id="farbe_'+e[r].uid+'" type="radio" name="farbe" value="'+e[r].uid+'"><label for="farbe_'+e[r].uid+'">'+e[r].name+"</label></p>";$("#rahmenVariantenAuswahl").html(t)}},actions:{initialize:function(){$("body").on("change","#rahmenId",Leuchtrahmen.Profile.helper.actions.changeRahmenFunction),$("body").on("change",".addProfilBtn",Leuchtrahmen.Profile.helper.actions.changeRahmenVarianteFunction)},changeRahmenFunction:function(e){e.preventDefault();var t=$(this).val();if("choose"!=t){var r=Konfigurator.helper.getProfil(t);Leuchtrahmen.Profile.setProfil(t).setVariante(null),Leuchtrahmen.Profile.helper.view.createProfilVariantenView(r.profil.variante),0==r.profil.frontscheibe?($("#title_frontscheibe_panel h4 a").removeAttr("data-toggle"),$("#title_frontscheibe_panel h4 a").removeAttr("href"),$("#title_frontscheibe_panel h4 a").attr("disabled","disabled"),Leuchtrahmen.Frontscheiben.helper.view.clearView()):($("#title_frontscheibe_panel h4 a").attr("data-toggle","collapse"),$("#title_frontscheibe_panel h4 a").attr("href","#frontscheibe_panel"),$("#title_frontscheibe_panel h4 a").removeAttr("disabled"));var i=Konfigurator.config.rahmenImgPfad,n=Konfigurator.helper.getProfil(t),a=i+n.profil.bild,o=i+"mini/"+n.profil.bild.replace(".jpg","mini.jpg"),s=n.profil.name;$(".materialImg").find("a").find("img").attr("src",o),$(".materialImg").find("a").attr("href",a),$(".materialImg").find("a").attr("data-title",s)}else Leuchtrahmen.Profile.setProfil(null).setVariante(null),$("#rahmenVariantenAuswahl").html("");Grundeinstellung.helper.view.createPriceView()},changeRahmenVarianteFunction:function(e){e.preventDefault();var t=Grundeinstellung.current.width,r=Grundeinstellung.current.height,i=$(this).parent("p").parent("div").parent("div").parent("div").find("div.error"),n=!0;if(n=n&&Validate.mainSet(t,r,i)){var a=$(this).val();Leuchtrahmen.Profile.setVariante(a);var o=Konfigurator.config.rahmenImgPfad,s=Konfigurator.helper.getProfil(Leuchtrahmen.Profile.getCurrentConfiguration().uid,a),l=o+s.variante.bild,u=o+"mini/"+s.variante.bild.replace(".jpg","mini.jpg"),c=s.profil.name+" - "+s.variante.name;$(".materialImg").find("a").find("img").attr("src",u),$(".materialImg").find("a").attr("href",l),$(".materialImg").find("a").attr("data-title",c),Grundeinstellung.helper.view.drawRahmen(),Beleuchtung.LED.helper.view.drawRahmen(),Grundeinstellung.helper.view.createPriceView(),$("#view-configuration-priceview").show(),Dispatcher.clearErrorFields(Dispatcher.Type.Frontscheibe).clearErrorFields(Dispatcher.Type.Streuplatte),Dispatcher.unSetConfigError(Dispatcher.Type.Frontscheibe),Dispatcher.unSetConfigError(Dispatcher.Type.Profil)}else $(this).removeAttr("checked"),Grundeinstellung.helper.view.createPriceView(),Leuchtrahmen.Profile.helper.view.clearView()}}}},Frontscheiben:{current:{uid:null,vid:null},getCurrentConfiguration:function(){return this.current},setFrontscheibe:function(e){return this.current.uid=e,Leuchtrahmen.Frontscheiben.helper.view.createView(),this},setVariante:function(e){return this.current.vid=e,Leuchtrahmen.Frontscheiben.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setFrontscheibe(null).setVariante(null),this},helper:{view:{createView:function(){var e=Konfigurator.helper.getFrontscheibe(Leuchtrahmen.Frontscheiben.current.uid,Leuchtrahmen.Frontscheiben.current.vid);$("#view-configuration-frontscheibe span.s").html(API.isset(e.frontscheibe)?e.frontscheibe.name:"keine"),$("#view-configuration-frontscheibe span.v").html(API.isset(e.variante)?e.variante.name:"")},clearView:function(){Leuchtrahmen.Frontscheiben.clearCurrentConfiguration(),Leuchtrahmen.Frontscheiben.helper.view.createView(),Leuchtrahmen.Frontscheiben.helper.view.createFrontscheibenView(),$("#frontscheibenId").val("choose"),$("#sicherheitAuswahl p input:checked").removeAttr("checked")},createFrontscheibenView:function(e,t){var r="";if(API.isset(e)&&API.isset(t)){var i=Konfigurator.helper.getFrontscheibe(e);if(API.isset(i.frontscheibe))for(var n=0;n<i.frontscheibe.variante.length;n++)i.frontscheibe.variante[n].sicherheit==t&&(r+='<p><input class="addFrontVarianteBtn" id="frontvar_'+i.frontscheibe.variante[n].uid+'" type="radio" name="frontvariante" value="'+i.frontscheibe.variante[n].uid+'"><label for="frontvar_'+i.frontscheibe.variante[n].uid+'">'+i.frontscheibe.variante[n].name+"</label></p>")}$("#frontscheiben-varianten").html(r)}},actions:{initialize:function(){$("body").on("change","#frontscheibenId",Leuchtrahmen.Frontscheiben.helper.actions.changeFrontscheibenFunction),$("body").on("click",".addFrontSicherheit",Leuchtrahmen.Frontscheiben.helper.actions.addSicherheitFunction),$("body").on("click",".addFrontVarianteBtn",Leuchtrahmen.Frontscheiben.helper.actions.addFrontVarianteFunction)},changeFrontscheibenFunction:function(e){e.preventDefault();var t=Leuchtrahmen.Profile.current.vid,r=$(this).parent("div").parent("div").parent("div").find("div.error");if(API.isset(t)){Dispatcher.clearErrorFields(Dispatcher.Type.Frontscheibe);var i=$(this);if("choose"!=i.val()){Leuchtrahmen.Frontscheiben.setFrontscheibe(i.val()).setVariante(null),$(".addFrontSicherheit").prop("checked",!1),$(".view-frontscheiben-varianten").css({display:"none"}),Validate.removeErrorStyle(i);var n=Konfigurator.helper.getFrontscheibe(i.val(),null);("KD4"==n.frontscheibe.artNr||"KD5"==n.frontscheibe.artNr)&&Dispatcher.unSetConfigError(Dispatcher.Type.Frontscheibe)}else Leuchtrahmen.Frontscheiben.setFrontscheibe(null).setVariante(null),Leuchtrahmen.Frontscheiben.helper.view.clearView();Grundeinstellung.helper.view.createPriceView()}else{Validate.updateText(r,"Bitte w&auml;hlen Sie zuerst eine Profilvariante aus!"),Dispatcher.addErrorField(Dispatcher.Type.Frontscheibe,r);var i=$(this).val("choose")}},addSicherheitFunction:function(){var e=$("#frontscheibenId"),t=e.parent("div").parent("div").parent("div").find("div.error"),r=!0;if(r=r&&Validate.isOptionSet(e,t)){Dispatcher.clearErrorFields(Dispatcher.Type.Frontscheibe),Validate.removeErrorStyle(e);var i=$(this).val();$(".view-frontscheiben-varianten").css({display:"block"}),Leuchtrahmen.Frontscheiben.setVariante(null),Leuchtrahmen.Frontscheiben.helper.view.createFrontscheibenView(e.val(),i),Grundeinstellung.helper.view.createPriceView()}else Dispatcher.addErrorField(Dispatcher.Type.Frontscheibe,t),$(this).removeAttr("checked")},addFrontVarianteFunction:function(){var e=$(this).val();Leuchtrahmen.Frontscheiben.setVariante(e),Grundeinstellung.helper.view.createPriceView(),Dispatcher.unSetConfigError(Dispatcher.Type.Frontscheibe)}}}}},Beleuchtung={LED:{rahmen:null,current:{uid:null,vid:null,kanten:new Kanten},getCurrentConfiguration:function(){return this.current},setLed:function(e){return this.current.uid=e,Beleuchtung.LED.helper.view.createView(),this},setVariante:function(e){return this.current.vid=e,Beleuchtung.LED.helper.view.createView(),this},setKante:function(e){return this.current.kanten.setKante(e),this},unSetKante:function(e){this.current.kanten.unSetKante(e)},clearCurrentConfiguration:function(){return this.setLed(null).setVariante(null),this.current.kanten.unSetKante("ALLE"),Beleuchtung.LED.helper.view.createLedVariantenAuswahl(),this},helper:{view:{createView:function(){var e=Konfigurator.helper.getLed(Beleuchtung.LED.current.uid,Beleuchtung.LED.current.vid);$("#view-configuration-beleuchtung span.b").html(API.isset(e.led)?e.led.name:"keine"),$("#view-configuration-beleuchtung span.v").html(API.isset(e.variante)?"- "+e.variante.name:"")},clearView:function(){Beleuchtung.LED.clearCurrentConfiguration(),Beleuchtung.LED.helper.view.createView()},iniCanvas:function(){Beleuchtung.LED.rahmen=new Rahmen("#view-streuplatte-licht",!1,Grundeinstellung.rahmen),Beleuchtung.LED.helper.view.createBorderSelectionView()},createLedVariantenAuswahl:function(e){var t="",r=Konfigurator.data.leds;t+='<select class="view-led-variante-auswahl">',t+='<option value="choose">Bitte w&auml;hlen</option>';for(var i=0;i<r.length;i++)if(r[i].uid==e)for(var n=0;n<r[i].variante.length;n++)t+='<option value="'+r[i].variante[n].uid+'">'+r[i].variante[n].name+"</option>";t+="</select>",$("#view-led-variante-auswahl").html(t)},createBorderSelectionView:function(){var e=Beleuchtung.LED.current.kanten,t="";t+='<div id="view-led-kantenCheckBox" class="view-led-kanten btn-group" data-toggle="buttons">';for(var r=0;r<e.kante.length;r++)t+='<label class="btn btn-glacryl">',t+='<input type="checkbox" value="'+e.kante[r]+'" />'+e.kante[r],t+="</label>";t+="</div>",$("#view-led-kanten-auswahl").html(t);var i=$("#view-led-kantenCheckBox label");$.each(i,function(t,r){var i=$(r).find("input").val();e.isKanteSet(i)&&API.activateCheckBox($(r))})},drawRahmen:function(){for(var e=Grundeinstellung.current.width,t=Grundeinstellung.current.height,r=Konfigurator.helper.getProfil(Leuchtrahmen.Profile.current.uid,Leuchtrahmen.Profile.current.vid),i=Beleuchtung.LED.current.kanten.getKanten(),n=Beleuchtung.Streuplatte.getCurrentConfiguration(),a=0,o=Konfigurator.data.streuplatten,s=0;s<o.length;s++)if(o[s].uid==n.uid)for(var l=0;l<o[s].variante.length;l++)o[s].variante[l].uid==n.vid&&(a=Number(o[s].variante[l].laenge));API.isset(r.variante)&&Beleuchtung.LED.rahmen.init(e,t,r.variante.artNr,13.2,a,"#F7FFA0",i)}},actions:{initialize:function(){$("body").on("click",".addLichtBtn",Beleuchtung.LED.helper.actions.addLichtFarbeFunction),$("body").on("change",".view-led-variante-auswahl",Beleuchtung.LED.helper.actions.changeLedVarianteFunction),$("body").on("click",".view-led-kanten",Beleuchtung.LED.helper.actions.changeKantenBeleuchtung)},addLichtFarbeFunction:function(e){var t=$(this).val();Beleuchtung.LED.setLed(t).setVariante(null),Beleuchtung.LED.helper.view.createLedVariantenAuswahl(t),Grundeinstellung.helper.view.createPriceView(),Dispatcher.unSetConfigError(Dispatcher.Type.LED)},changeLedVarianteFunction:function(e){var t=$(this).val(),r=$(this).parent("div").parent("div").parent("div").find("div.error"),i=Beleuchtung.LED.getCurrentConfiguration().uid,n=!0,n=n&&Validate.isLedSet(i,r);if(n)if("choose"!=t){Beleuchtung.LED.setVariante(t),Dispatcher.unSetConfigError(Dispatcher.Type.Steuerung);var a=Beleuchtung.Streuplatte.getCurrentConfiguration().uid,o=Beleuchtung.LED.getCurrentConfiguration().kanten.areSomeKantenSet();API.isset(a)&&o&&Grundeinstellung.helper.view.createPriceView()}else Beleuchtung.LED.setVariante(null)},changeKantenBeleuchtung:function(e){var t=$(this).parent().find(".view-led-kanten"),r=$(e.target).find("input").val(),i=t.parent("div").parent("div").parent("div").find("div.error"),n=!0,a=Beleuchtung.Streuplatte.getCurrentConfiguration().vid;n=n&&Validate.isStreuplatteSet(a,i),n?(Dispatcher.clearErrorFields(Dispatcher.Type.Streuplatte),Beleuchtung.LED.current.kanten.isKanteSet(r)?Beleuchtung.LED.current.kanten.unSetKante(r):Beleuchtung.LED.current.kanten.setKante(r),Grundeinstellung.helper.view.drawRahmen(),Beleuchtung.LED.helper.view.drawRahmen(),Grundeinstellung.helper.view.createPriceView(),Dispatcher.unSetConfigError(Dispatcher.Type.Kanten)):(Beleuchtung.LED.helper.view.createBorderSelectionView(),Dispatcher.addErrorField(Dispatcher.Type.Streuplatte,i))}}}},Streuplatte:{current:{uid:null,vid:null},getCurrentConfiguration:function(){return this.current},setStreuplatte:function(e){return this.current.uid=e,Beleuchtung.Streuplatte.helper.view.createView(),this},setVariante:function(e){return this.current.vid=e,Beleuchtung.Streuplatte.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setStreuplatte(null).setVariante(null),this},helper:{view:{createView:function(){var e=Konfigurator.helper.getStreuplatte(Beleuchtung.Streuplatte.current.uid,Beleuchtung.Streuplatte.current.vid);$("#view-configuration-streuplatte span.s").html(API.isset(e.streuplatte)?e.streuplatte.name:"keine"),$("#view-configuration-streuplatte span.v").html(API.isset(e.variante)?"- "+e.variante.name:"")},clearView:function(){Beleuchtung.Streuplatte.clearCurrentConfiguration(),Beleuchtung.Streuplatte.helper.view.createView()}},actions:{initialize:function(){$("body").on("click",".addStreuplatteBtn",Beleuchtung.Streuplatte.helper.actions.addStreuplatteFunction)},addStreuplatteFunction:function(e){var t=$(this),r=t.parent("p").parent("div").parent("div").parent("div").find("div.error"),i=Leuchtrahmen.Profile.getCurrentConfiguration().vid,n=!0;if(n=n&&Validate.isRahmenSet(i,r)){for(var a=null,o=Konfigurator.data.streuplatten,s=0;s<o.length;s++)o[s].uid==Number(t.val())&&(a=Number(o[s].variante[0].uid));Beleuchtung.Streuplatte.setStreuplatte(Number(t.val())).setVariante(a),Grundeinstellung.helper.view.drawRahmen(),Beleuchtung.LED.helper.view.drawRahmen(),Grundeinstellung.helper.view.createPriceView(),Dispatcher.unSetConfigError(Dispatcher.Type.Streuplatte)}else t.removeAttr("checked")}}}},Netzanschluss:{current:{uid:null,vid:null},getCurrentConfiguration:function(){return this.current},setAnschluss:function(e){return this.current.uid=e,this},setVariante:function(e){return this.current.vid=e,Beleuchtung.Netzanschluss.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setAnschluss(null).setVariante(null),this},helper:{view:{createView:function(){var e=Konfigurator.helper.getAnschluss(Beleuchtung.Netzanschluss.current.uid,Beleuchtung.Netzanschluss.current.vid);$("#view-configuration-netzanschluss span").html(API.isset(e.variante)?e.variante.name:"kein")},clearView:function(){Beleuchtung.Netzanschluss.clearCurrentConfiguration(),Beleuchtung.Netzanschluss.helper.view.createView()}},actions:{initialize:function(){$("body").on("click",".addNetzanschlussBtn",Beleuchtung.Netzanschluss.helper.actions.addNetzanschlussFunction)},addNetzanschlussFunction:function(e){var t=$(this).parent("p").parent("div.view-led-anschluss-auswahl").find("input[name=anschlussTyp]").val(),r=$(this).val();Beleuchtung.Netzanschluss.setAnschluss(t).setVariante(r);var i=Konfigurator.config.rahmenImgPfad,n=Konfigurator.helper.getAnschluss(t,r),a=i+n.variante.bild,o=i+"mini/"+n.variante.bild.replace(".jpg","mini.jpg"),s=n.anschluss.name+" - "+n.variante.name;$("#view-led-anschluss-bild-"+t).find("a").find("img").attr("src",o),$("#view-led-anschluss-bild-"+t).find("a").attr("href",a),$("#view-led-anschluss-bild-"+t).find("a").attr("data-title",s),Grundeinstellung.helper.view.createPriceView()}}}}},Befestigung={Montage:{current:{uid:null,vid:null},getCurrentConfiguration:function(){return this.current},setMontage:function(e){return this.current.uid=e,Befestigung.Montage.helper.view.createView(),this},setVariante:function(e){return this.current.vid=e,Befestigung.Montage.helper.view.createView(),this},clearCurrentConfiguration:function(){return this.setMontage(null).setVariante(null),this},helper:{view:{createView:function(){var e=Konfigurator.helper.getBefestigung(Befestigung.Montage.current.uid,Befestigung.Montage.current.vid);$("#view-configuration-befestigung span.f").html(API.isset(e.montage)?e.montage.name:"keine"),$("#view-configuration-befestigung span.v").html(API.isset(e.variante)?"- "+e.variante.name:"")},clearView:function(){Befestigung.Montage.clearCurrentConfiguration(),Befestigung.Montage.helper.view.createView()},createMontageVariantenView:function(e,t){var r="";if("choose"!=e)for(var i=Konfigurator.helper.getBefestigung(e),n=0;n<i.montage.variante.length;n++)r+='<p><input class="addMontageVarianteBtn" data-artNr ="'+i.montage.variante[n].artNr+'" id="montagevar_'+i.montage.variante[n].uid+'" type="radio" name="montagevariante" value="'+i.montage.variante[n].uid+'"><label for="montagevar_'+i.montage.variante[n].uid+'">'+i.montage.variante[n].name+"</label></p>";$(".view-montage-varianten-auswahl").html(r)}},actions:{initialize:function(){$("body").on("change",".view-montagetyp-auswahl",Befestigung.Montage.helper.actions.changeMontageTypFunction),$("body").on("click",".addMontageVarianteBtn",Befestigung.Montage.helper.actions.addMontageFunction)},changeMontageTypFunction:function(e){e.preventDefault();var t=$(this),r=t.parent("div").parent("div").parent("div").find("div.error"),i=Konfigurator.helper.getAnschluss(Beleuchtung.Netzanschluss.getCurrentConfiguration().uid,Beleuchtung.Netzanschluss.getCurrentConfiguration().vid),n=!0;if(n=n&&Validate.isAnschlussSet(t,i,r)){var a=t.val();if(Befestigung.Montage.helper.view.createMontageVariantenView(a,i),"choose"!=a){Befestigung.Montage.setMontage(a).setVariante(null);var o=Konfigurator.config.rahmenImgPfad,s=Konfigurator.helper.getBefestigung(a),l=o+s.montage.bild,u=o+"mini/"+s.montage.bild.replace(".jpg","mini.jpg"),c=s.montage.name;$("#view-montage-img").find("a").find("img").attr("src",u),$("#view-montage-img").find("a").attr("href",l),$("#view-montage-img").find("a").attr("data-title",c)}else Befestigung.Montage.setMontage(null).setVariante(null)}else t.val("choose");Grundeinstellung.helper.view.createPriceView()},addMontageFunction:function(e){var t=$(this).parentsUntil("div.panel-collapse").find("select.view-montagetyp-auswahl").val(),r=$(this).val();Befestigung.Montage.setMontage(t).setVariante(r);var i=Konfigurator.config.rahmenImgPfad,n=Konfigurator.helper.getBefestigung(t,r),a=i+n.variante.bild,o=i+"mini/"+n.variante.bild.replace(".jpg","mini.jpg"),s=n.montage.name+" - "+n.variante.name;$("#view-montage-img").find("a").find("img").attr("src",o),$("#view-montage-img").find("a").attr("href",a),$("#view-montage-img").find("a").attr("data-title",s),Grundeinstellung.helper.view.createPriceView(),Dispatcher.unSetConfigError(Dispatcher.Type.Montage)}}}}},Konfigurator={data:null,schild:null,mobileSchild:null,dependencies:{},config:{rahmenImgPfad:"typo3conf/ext/glshop/Resources/Public/Img/Rahmen/",imgsUrl:"typo3conf/ext/glshop/Resources/Public/Img/"},initialize:function(){$(window).resize(function(){InputFieldTest.start()});var e=new Object;return e.eID="ajaxDispatcher",e.request={pluginName:"Glacrylshop",controller:"Aj",action:"rahmenKonfig",arguments:{uid:"",positionNr:$("#edit-position-nr").val()}},this.data=API.ajax(!1,e,"GET","json"),Grundeinstellung.helper.view.iniCanvas(),Beleuchtung.LED.helper.view.iniCanvas(),this},createView:function(){return API.isset(this.data.edit)?0!=this.data.edit.length&&(this.fillEditData(),$("#editCartBtn").show(),$("#editCartMobileBtn").show(),$("#addToCartBtn").hide(),$("#addToCartMobileBtn").hide(),API.MobileCheck()?$("#mobile-footer-data").show():$("#mobile-footer-data").hide()):($("#editCartBtn").hide(),$("#editCartMobileBtn").hide(),$("#addToCartBtn").show(),$("#addToCartMobileBtn").show()),View.Configuration.createView.initialize(),this},fillEditData:function(){if(API.isset(this.data.edit.article)){var e=this.data.edit.article.material;Material.setMaterial(e.uid),Material.setVariante(e.vid),Material.setSize(e.size);var t=this.data.edit.article.materialConfig;Grundeinstellung.setQty(this.data.edit.qty),Grundeinstellung.setWidth(t.width),Grundeinstellung.setHeight(t.height);var r=this.data.edit.article.bearbeitungen.kanten;Bearbeitungen.Kanten.setBearbeitung(r.uid),Bearbeitungen.Kanten.setFacette(r.facette),Bearbeitungen.Kanten.setAngle(r.angle);var i=this.data.edit.article.bearbeitungen.ecken;if(API.isset(i))for(var n=0;n<i.length;n++)Bearbeitungen.Ecken.addConfiguration(i[n].uid,i[n].corner,i[n].radius,i[n].x,i[n].y);var a=this.data.edit.article.bearbeitungen.bohrungen;if(API.isset(a)){for(var n=0;n<a.length;n++)Bearbeitungen.Bohrungen.addConfiguration(a[n].uid,a[n].corner,a[n].dB,a[n].x,a[n].y,a[n].index);View.Bearbeitungen.Bohrungen.createSelectionView()}var o=this.data.edit.article.bearbeitungen.senkungen;if(API.isset(o)){for(var n=0;n<o.length;n++)Bearbeitungen.Senkungen.addConfiguration(o[n].bearbeitung,o[n].corner,o[n].m,o[n].dB,o[n].dS,o[n].x,o[n].y,o[n].index);View.Bearbeitungen.Senkungen.createSelectionView()}var s=this.data.edit.article.halter;if(API.isset(s)){for(var n=0;n<s.length;n++)API.isset(s[n].corner)&&""!=s[n].corner?Halter.addConfiguration(s[n].hid,s[n].vid,s[n].corner,s[n].x,s[n].y,s[n].index,s[n].qty,s[n].bohrIndex):Halter.addConfiguration(s[n].hid,s[n].vid,null,null,null,s[n].index,s[n].qty);View.Halter.ohneBohrung.createSelectionView(),View.Halter.mitBohrung.createSelectionView()}$("#view-konfigurator-img").show(),Konfigurator.helper.drawCADImg(),this.iniEditFields(),Price.createPriceView(),$("#view-configuration-priceview").show()}},iniEditFields:function(){$("#view-configuration-qty").val(Grundeinstellung.getCurrentConfiguration().qty),$("#view-configuration-width").val(Grundeinstellung.getCurrentConfiguration().width),$("#view-configuration-height").val(Grundeinstellung.getCurrentConfiguration().height)},resetKonfiguratorView:function(){return $("#view-configuration-priceview").hide(),this.createView(),this},resetKonfiguratorInputs:function(){$("#view-configuration-qty").val("1"),$("#view-configuration-width").val(""),$("#view-configuration-height").val(""),$("#view-halterMitBohrung-x").val(""),$("#view-halterMitBohrung-y").val(""),$("#view-halterOhneBohrung-qty").val(""),$("#view-kanten-facette").val(""),$("#view-kanten-angle").val("45"),$("#view-eckbearbeitung-x").val(""),$("#view-eckbearbeitung-y").val(""),$("#view-eckbearbeitung-radius").val(""),$("#view-bohrungen-d").val(""),$("#view-bohrungen-x").val(""),$("#view-bohrungen-y").val(""),$("#view-senkungen-x").val(""),$("#view-senkungen-y").val("")},clearEditState:function(){Konfigurator.data.edit=null,$("#edit-position-nr").val("")},prepareDataForImg:function(){var e={configuration:Konfigurator.data,material:Material.getCurrentConfiguration(),materialConfig:Grundeinstellung.getCurrentConfiguration(),bearbeitungen:{kanten:Bearbeitungen.Kanten.getCurrentConfiguration(),ecken:Bearbeitungen.Ecken.getCurrentConfiguration(),bohrungen:Bearbeitungen.Bohrungen.getCurrentConfiguration(),senkungen:Bearbeitungen.Senkungen.getCurrentConfiguration()},halter:Halter.getCurrentConfiguration()};return e},getDataForCart:function(){var e={profil:Leuchtrahmen.Profile.getCurrentConfiguration(),frontscheibe:Leuchtrahmen.Frontscheiben.getCurrentConfiguration(),led:Beleuchtung.LED.getCurrentConfiguration(),kanten:Beleuchtung.LED.current.kanten.getKanten(),streuplatte:Beleuchtung.Streuplatte.getCurrentConfiguration(),netzanschluss:Beleuchtung.Netzanschluss.getCurrentConfiguration(),befestigung:Befestigung.Montage.getCurrentConfiguration(),rahmenConfig:Grundeinstellung.getCurrentConfiguration()};return e},helper:{drawCADImg:function(){var e=Konfigurator.prepareDataForImg();Konfigurator.schild.initialize("view-konfigurator-img",e).draw();var t=$("#view-konfigurator-img").getCanvasImage("png");$("#konfigurator-img-mobile").attr("src",t),t=null},getMiniImgData:function(e,t){switch(e){case"path":return"mini/";case"name":var r=t.split(".");return r[0]+"mini.jpg"}},isEckeForKanteEnabled:function(e,t){var r=Konfigurator.dependencies.ecken;if(null!=t)for(var i=0;i<r.length;i++)if(r[i].uid==e)return $.inArray(parseInt(t),r[i].kanten)>-1?!0:!1},getProfil:function(e,t){for(var r=Konfigurator.data.profile,i={profil:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.profil=r[n],API.isset(t)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getFrontscheibe:function(e,t){for(var r=Konfigurator.data.frontscheiben,i={frontscheibe:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.frontscheibe=r[n],API.isset(t)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getLed:function(e,t){for(var r=Konfigurator.data.leds,i={led:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.led=r[n],API.isset(t)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getStreuplatte:function(e,t){for(var r=Konfigurator.data.streuplatten,i={streuplatte:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.streuplatte=r[n],API.isset(t)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getAnschluss:function(e,t){for(var r=Konfigurator.data.anschluss,i={anschluss:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.anschluss=r[n],API.isset(e)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getBefestigung:function(e,t){for(var r=Konfigurator.data.montage,i={montage:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.montage=r[n],API.isset(t)))for(var a=0;a<r[n].variante.length;a++)r[n].variante[a].uid==t&&(i.variante=r[n].variante[a]);return i},getSenkungen:function(e){for(var t=Konfigurator.data.senkungen,r=null,i=0;i<t.length;i++)parseFloat(t[i].gewinde)==parseFloat(e)&&(r=t[i]);return r},getHalter:function(e,t){for(var r=Konfigurator.data.halter,i={halter:null,variante:null},n=0;n<r.length;n++)if(r[n].uid==e&&(i.halter={uid:r[n].uid,pid:r[n].pid,name:r[n].name,bild:r[n].bild},API.isset(t)))for(var a=0;a<r[n].varianten.length;a++)r[n].varianten[a].uid==t&&(i.variante=r[n].varianten[a]);return i}}},View={initializeFrontEnd:function(){InputFieldTest.start(),Grundeinstellung.helper.actions.initialize(),Leuchtrahmen.Profile.helper.actions.initialize(),Leuchtrahmen.Frontscheiben.helper.actions.initialize(),Beleuchtung.LED.helper.actions.initialize(),Beleuchtung.Streuplatte.helper.actions.initialize(),Beleuchtung.Netzanschluss.helper.actions.initialize(),Befestigung.Montage.helper.actions.initialize(),Grundeinstellung.helper.view.clearView()},actions:{initializeFirst:function(){this.Configuration.initialize()},Configuration:{initialize:function(){$("body").on("click","#back-to-Top-Lnk",View.actions.Configuration.backToTopFunction),$("body").on("click","#show-mobile-img-btn",View.actions.Configuration.showMobileCADFunction)},showMobileCADFunction:function(e){e.preventDefault(),$("#mobile-img-area").toggle("fast",function(){var e=$("#show-mobile-img-btn").find("img");"typo3conf/ext/glshop/Resources/Public/Img/CAD.png"==e.attr("src")?e.attr("src","typo3conf/ext/glshop/Resources/Public/Img/CAD_open.png"):e.attr("src","typo3conf/ext/glshop/Resources/Public/Img/CAD.png")})},backToTopFunction:function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},"slow")}}},Configuration:{createView:{initialize:function(){this.iniDialog()},iniDialog:function(){$("#konfigurator-success-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",width:"auto",modal:!0,buttons:{"Weiter einkaufen":function(){Konfigurator.clearEditState(),$(this).dialog("close");var e=$("base").attr("href"),t=e+"shop/?tx_glshop_glacrylshop%5Baction%5D=rahmen&tx_glshop_glacrylshop%5Bcontroller%5D=Shop";window.location=t},"Zum Warenkorb":function(){$(this).dialog("close");var e=$("base").attr("href"),t=e+"shop/?tx_glshop_glacrylshop%5Baction%5D=index&tx_glshop_glacrylshop%5Bcontroller%5D=Cart";window.location=t}}}),$("#konfigurator-error-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",modal:!0,buttons:{OK:function(){$(this).dialog("close")}}}),$("#konfigurator-qty-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",modal:!0,buttons:{OK:function(){$(this).dialog("close"),$("konfigurator-qty-warning").html("")}},close:function(){$("#konfigurator-success-Dialog").dialog("open")}}),$("#konfigurator-changeKanten-Dialog").dialog({autoOpen:!1,resizable:!1,height:"auto",modal:!0,buttons:{Ja:function(){for(var e=Dispatcher.transition.ecken,t=0;t<e.length;t++)Bearbeitungen.Ecken.removeConfiguration(e[t].corner);View.Configuration.createView.insertEckenView(),Price.createPriceView(),Dispatcher.clearTransition(),View.actions.Bearbeitungen.changeAndSaveKantenAuswahlFunction(),View.Bearbeitungen.Ecken.createEckBearbeitungAuswahl(),View.Bearbeitungen.Ecken.createEckSelectionView(),View.Bearbeitungen.Ecken.createSelectionView(),$(".view-eckbearbeitung-rund").hide(),$("#view-ecken-img").hide(),$(this).dialog("close")},Nein:function(){Dispatcher.clearTransition(),$(this).dialog("close")}}})}}}};$(function(){Konfigurator.initialize(),Konfigurator.resetKonfiguratorView(),View.initializeFrontEnd(),View.actions.initializeFirst(),Tooltips.initialize(null),$("#view-configuration-width").focus()})}(jQuery);