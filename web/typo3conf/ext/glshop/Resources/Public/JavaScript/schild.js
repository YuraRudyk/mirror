function Schild(){this.log=!1,this.data={},this.corner={},this.material={width:null,height:null},this.config={imgPaths:{halter:"typo3conf/ext/glshop/Resources/Public/Img/Products/"},offsetX:105,offsetY:105,tOffset:80,scale:1,bild:null,cWidth:null,cHeight:null,facette:!1},this.initialize=function(e,t){return this.config.bild=$("#"+e),this.config.cWidth=this.config.bild.width(),this.config.cHeight=this.config.bild.height(),this.config.offsetX=this.config.cWidth/2,this.config.offsetY=this.config.cHeight/2,this.data=t,this.material.width=this.data.materialConfig.width,this.material.height=this.data.materialConfig.height,this.checkScale(),this.corner=this.getCorner(),"undefined"!=typeof this.data.bearbeitungen.kanten.facette&&null!=this.data.bearbeitungen.kanten.facette&&""!=this.data.bearbeitungen.kanten.facette&&(this.config.facette=!0),this},this.clearCanvas=function(){return this.config.bild.clearCanvas(),this},this.getCorner=function(){var e=this.config.offsetX,t=this.config.offsetY,s=this.config.scale,a=this.material.width,i=this.material.height,r=[{x:e-a*s/2,y:t-i*s/2},{x:e+a*s/2,y:t-i*s/2},{x:e+a*s/2,y:t+i*s/2},{x:e-a*s/2,y:t+i*s/2}];return r},this.checkScale=function(){var e=Number(this.material.width),t=Number(this.material.height),s=this.config.cWidth-this.config.tOffset,a=this.config.cHeight-this.config.tOffset;s>e&&a>t||e>s&&e>a?t>e?this.config.scale=a/t:this.config.scale=s/e:e>s&&a>t?this.config.scale=s/e:s>e&&t>a&&(this.config.scale=a/t),this.log&&log(this.config.scale)},this.draw=function(){return this.clearCanvas().drawSchild(),this.beschrifteEcken().zeichneSkala(),this.zeichneBohrungen().zeichneSenkungen(),this.zeichneHalter(),this},this.getEckRadius=function(){var e=0;return"undefined"!=typeof this.data.bearbeitungen.ecken[0]&&"ALLE"==this.data.bearbeitungen.ecken[0].corner&&null!=this.data.bearbeitungen.ecken[0].radius&&(e=this.data.bearbeitungen.ecken[0].radius),Number(e)},this.drawSchild=function(){var e=this.data.bearbeitungen.ecken;0==e.length?(this.log&&log("Normaler Schild"),this.drawRect(!0,"schild","material","#000",1,this.scaleValue(this.getEckRadius(e)),this.config.offsetX,this.config.offsetY,Number(this.material.width),Number(this.material.height)),this.config.facette&&this.drawRect(!0,"schild","material","#000",1,this.scaleValue(this.getEckRadius(e)),this.config.offsetX,this.config.offsetY,Number(this.material.width)-2*Number(this.data.bearbeitungen.kanten.facette),Number(this.material.height)-2*Number(this.data.bearbeitungen.kanten.facette))):"ALLE"==e[0].corner?e[0].radius?(this.log&&log("Schild mit allen Runden Ecken"),this.zeichneAlleEckenRund(),this.config.facette&&this.zeichneAlleEckenRund(Number(this.data.bearbeitungen.kanten.facette))):(this.log&&log("Schild mit allen Schr√§gen Ecken"),this.zeichneAlleEckenSchraeg(),this.config.facette&&this.zeichneAlleEckenSchraeg(Number(this.data.bearbeitungen.kanten.facette))):(this.log&&log("Schild mit unterschiedlichen Ecken"),this.zeichneEcken(),this.config.facette&&this.zeichneEcken(Number(this.data.bearbeitungen.kanten.facette)))},this.drawRect=function(e,t,s,a,i,r,h,l,c,n){this.config.bild.drawRect({layer:e,name:t,group:s,strokeStyle:a,strokeWidth:i,cornerRadius:r,x:h,y:l,width:this.scaleValue(c),height:this.scaleValue(n)})},this.beschriftung=function(e,t,s,a,i,r,h,l,c,n,u){this.config.bild.drawText({layer:e,name:t,group:s,fillStyle:a,strokeStyle:i,strokeWidth:r,x:h,y:l,font:c,text:n,rotate:u})},this.beschrifteEcken=function(){var e="9pt Verdana, sans-serif",t=this.material.width,s=this.material.height,a=this.config.offsetX-this.scaleValue(t)/2-10,i=this.config.offsetY-this.scaleValue(s)/2-10,r=this.config.offsetX+this.scaleValue(t)/2+10,h=this.config.offsetY-this.scaleValue(s)/2-10,l=this.config.offsetX+this.scaleValue(t)/2+10,c=this.config.offsetY+this.scaleValue(s)/2+10,n=this.config.offsetX-this.scaleValue(t)/2-10,u=this.config.offsetY+this.scaleValue(s)/2+10;return this.beschriftung(!0,"E1","eckBeschriftung","#E6E6E6","#515151",1,a,i,e,"E1",0),this.beschriftung(!0,"E2","eckBeschriftung","#E6E6E6","#515151",1,r,h,e,"E2",0),this.beschriftung(!0,"E3","eckBeschriftung","#E6E6E6","#515151",1,l,c,e,"E3",0),this.beschriftung(!0,"E4","eckBeschriftung","#E6E6E6","#515151",1,n,u,e,"E4",0),this},this.beschrifteKanten=function(){var e="8pt Verdana, sans-serif",t=this.material.width,s=this.material.height,a=this.config.offsetX,i=this.config.offsetY-this.scaleValue(s)/2-10-13,r=this.config.offsetX+this.scaleValue(t)/2+10+13,h=this.config.offsetY,l=this.config.offsetX,c=this.config.offsetY+this.scaleValue(s)/2+10+13,n=this.config.offsetX-this.scaleValue(t)/2-10-13,u=this.config.offsetY;return this.beschriftung(!0,"K1","kantenBeschriftung","#E6E6E6","#515151",1,a,i,e,"K1: "+t+" mm",0),this.beschriftung(!0,"K2","kantenBeschriftung","#E6E6E6","#515151",1,r,h,e,"K2: "+s+" mm",90),this.beschriftung(!0,"K3","kantenBeschriftung","#E6E6E6","#515151",1,l,c,e,"K3: "+t+" mm",0),this.beschriftung(!0,"K4","kantenBeschriftung","#E6E6E6","#515151",1,n,u,e,"K4: "+s+" mm",270),this},this.zeichneSkala=function(){var e="8pt Verdana, sans-serif";return this.beschriftung(!0,"X","skalenBeschriftung","#E6E6E6","#515151",1,60,this.config.cHeight-10,e,"X",0),this.beschriftung(!0,"Y","skalenBeschriftung","#E6E6E6","#515151",1,10,this.config.cHeight-60,e,"Y",0),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:10,y1:this.config.cHeight-10,x2:50,y2:this.config.cHeight-10}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:50,y1:this.config.cHeight-10,x2:45,y2:this.config.cHeight-5}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:50,y1:this.config.cHeight-10,x2:45,y2:this.config.cHeight-15}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:10,y1:this.config.cHeight-10,x2:10,y2:this.config.cHeight-50}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:10,y1:this.config.cHeight-50,x2:5,y2:this.config.cHeight-45}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:10,y1:this.config.cHeight-50,x2:15,y2:this.config.cHeight-45}),this},this.zeichneBohrungen=function(){var e=this.data.bearbeitungen.bohrungen;if("undefined"!=typeof e)for(var t=0;t<e.length;t++)this.setBohrung(e[t],e[t].corner);return this},this.zeichneSenkungen=function(){var e=this.data.bearbeitungen.senkungen;if("undefined"!=typeof e)for(var t=0;t<e.length;t++)this.setSenkung(e[t],e[t].corner);return this},this.setSenkung=function(e,t){switch(t){case"ALLE":this.setSenkung(e,"E1"),this.setSenkung(e,"E2"),this.setSenkung(e,"E3"),this.setSenkung(e,"E4");break;case"E1":this.zeichneKreis(!0,"senkBohrungen","#555555",1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(e.dS/2)),this.setBohrung(e,t);break;case"E2":this.zeichneKreis(!0,"senkBohrungen","#555555",1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(e.dS/2)),this.setBohrung(e,t);break;case"E3":this.zeichneKreis(!0,"senkBohrungen","#555555",1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(e.dS/2)),this.setBohrung(e,t);break;case"E4":this.zeichneKreis(!0,"senkBohrungen","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(e.dS/2)),this.setBohrung(e,t);break;case"FREI":this.zeichneKreis(!0,"senkBohrungen","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(e.dS/2)),this.setBohrung(e,t)}},this.setBohrung=function(e,t){switch(t){case"ALLE":this.setBohrung(e,"E1"),this.setBohrung(e,"E2"),this.setBohrung(e,"E3"),this.setBohrung(e,"E4");break;case"E1":this.zeichneKreis(!0,"bohrungen","#555555",1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(e.dB/2));break;case"E2":this.zeichneKreis(!0,"bohrungen","#555555",1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(e.dB/2));break;case"E3":this.zeichneKreis(!0,"bohrungen","#555555",1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(e.dB/2));break;case"E4":this.zeichneKreis(!0,"bohrungen","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(e.dB/2));break;case"FREI":this.zeichneKreis(!0,"bohrungen","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(e.dB/2))}},this.zeichneKreis=function(e,t,s,a,i,r,h,l){"undefined"!=typeof l&&null!=l?this.config.bild.drawArc({layer:e,group:t,strokeStyle:s,strokeWidth:a,fillStyle:l,x:i,y:r,radius:h}):this.config.bild.drawArc({layer:e,group:t,strokeStyle:s,strokeWidth:a,x:i,y:r,radius:h})},this.rundeEcke=function(e,t,s,a,i){this.config.bild.drawArc({strokeStyle:"#000",strokeWidth:1,x:e,y:t,radius:s,start:a,end:i})},this.zeichneHalterBild=function(e,t,s,a,i,r,h,l){this.config.bild.drawImage({layer:e,name:t,group:s,source:a,x:i,y:r,width:h,height:l,fromCenter:!0})},this.zeichneAlleEckenSchraeg=function(e){for(var t=this.data.bearbeitungen.ecken,s=[],a=0,i=0,r=0,h=0,l=0,c=0,n=0,u=0,o=0;o<t.length;o++)s[t[o].corner]=t[o];if(this.log&&log("Facette:",e),e){e=this.scaleValue(e);var d=this.corner[0].x,g=this.corner[0].y+this.scaleValue(s.ALLE.y),V=this.corner[0].x+this.scaleValue(s.ALLE.x),y=this.corner[0].y,f=this.corner[1].x-this.scaleValue(s.ALLE.x),x=this.corner[1].y,E=this.corner[1].x,b=this.corner[1].y+this.scaleValue(s.ALLE.y),p=this.corner[2].x,L=this.corner[2].y-this.scaleValue(s.ALLE.y),k=this.corner[2].x-this.scaleValue(s.ALLE.x),F=this.corner[2].y,m=this.corner[3].x+this.scaleValue(s.ALLE.x),A=this.corner[3].y,P=this.corner[3].x,S=this.corner[3].y-this.scaleValue(s.ALLE.y);a=Number(this.getFacettenVerschiebung("P1",e,d,g,V,y)),i=Number(this.getFacettenVerschiebung("P2",e,f,x,E,b)),r=Number(this.getFacettenVerschiebung("P3",e,f,x,E,b)),h=Number(this.getFacettenVerschiebung("P4",e,p,L,k,F)),l=Number(this.getFacettenVerschiebung("P5",e,p,L,k,F)),c=Number(this.getFacettenVerschiebung("P6",e,m,A,P,S)),n=Number(this.getFacettenVerschiebung("P7",e,m,A,P,S)),u=Number(this.getFacettenVerschiebung("P8",e,d,g,V,y))}this.log&&log("Skalierung:",this.config.scale),this.log&&log("Facette skaliert:",e),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[0].x+(e?this.scaleValue(s.ALLE.x)+a:this.scaleValue(s.ALLE.x)),y1:this.corner[0].y+(e?e:0),x2:this.corner[1].x-(e?this.scaleValue(s.ALLE.x)+i:this.scaleValue(s.ALLE.x)),y2:this.corner[1].y+(e?e:0)}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[1].x-(e?e:0),y1:this.corner[1].y+(e?this.scaleValue(s.ALLE.y)+r:this.scaleValue(s.ALLE.y)),x2:this.corner[2].x-(e?e:0),y2:this.corner[2].y-(e?this.scaleValue(s.ALLE.y)+h:this.scaleValue(s.ALLE.y))}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[2].x-(e?this.scaleValue(s.ALLE.x)+l:this.scaleValue(s.ALLE.x)),y1:this.corner[2].y-(e?e:0),x2:this.corner[3].x+(e?this.scaleValue(s.ALLE.x)+c:this.scaleValue(s.ALLE.x)),y2:this.corner[3].y-(e?e:0)}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[3].x+(e?e:0),y1:this.corner[3].y-(e?this.scaleValue(s.ALLE.y)+n:this.scaleValue(s.ALLE.y)),x2:this.corner[0].x+(e?e:0),y2:this.corner[0].y+(e?this.scaleValue(s.ALLE.y)+u:this.scaleValue(s.ALLE.y))}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[1].x-(e?this.scaleValue(s.ALLE.x)+i:this.scaleValue(s.ALLE.x)),y1:this.corner[1].y+(e?e:0),x2:this.corner[1].x-(e?e:0),y2:this.corner[1].y+(e?this.scaleValue(s.ALLE.y)+r:this.scaleValue(s.ALLE.y))}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[2].x-(e?e:0),y1:this.corner[2].y-(e?this.scaleValue(s.ALLE.y)+h:this.scaleValue(s.ALLE.y)),x2:this.corner[2].x-(e?this.scaleValue(s.ALLE.x)+l:this.scaleValue(s.ALLE.x)),y2:this.corner[2].y-(e?e:0)}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[3].x+(e?this.scaleValue(s.ALLE.x)+c:this.scaleValue(s.ALLE.x)),y1:this.corner[3].y-(e?e:0),x2:this.corner[3].x+(e?e:0),y2:this.corner[3].y-(e?this.scaleValue(s.ALLE.y)+n:this.scaleValue(s.ALLE.y))}).drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[0].x+(e?e:0),y1:this.corner[0].y+(e?this.scaleValue(s.ALLE.y)+u:this.scaleValue(s.ALLE.y)),x2:this.corner[0].x+(e?this.scaleValue(s.ALLE.x)+a:this.scaleValue(s.ALLE.x)),y2:this.corner[0].y+(e?e:0)})},this.zeichneAlleEckenRund=function(e){for(var t=this.data.bearbeitungen.ecken,s=[],a=0,i=0,r=0,h=0,l=0,c=0,n=0,u=0,o=0;o<t.length;o++)s[t[o].corner]=t[o];if(e){e=this.scaleValue(e);var d=this.corner[0].x,g=this.corner[0].y+this.scaleValue(s.ALLE.radius),V=this.corner[0].x+this.scaleValue(s.ALLE.radius),y=this.corner[0].y,f=this.corner[1].x-this.scaleValue(s.ALLE.radius),x=this.corner[1].y,E=this.corner[1].x,b=this.corner[1].y+this.scaleValue(s.ALLE.radius),p=this.corner[2].x,L=this.corner[2].y-this.scaleValue(s.ALLE.radius),k=this.corner[2].x-this.scaleValue(s.ALLE.radius),F=this.corner[2].y,m=this.corner[3].x+this.scaleValue(s.ALLE.radius),A=this.corner[3].y,P=this.corner[3].x,S=this.corner[3].y-this.scaleValue(s.ALLE.radius);a=Number(this.getFacettenVerschiebung("P1",e,d,g,V,y)),i=Number(this.getFacettenVerschiebung("P2",e,f,x,E,b)),r=Number(this.getFacettenVerschiebung("P3",e,f,x,E,b)),h=Number(this.getFacettenVerschiebung("P4",e,p,L,k,F)),l=Number(this.getFacettenVerschiebung("P5",e,p,L,k,F)),c=Number(this.getFacettenVerschiebung("P6",e,m,A,P,S)),n=Number(this.getFacettenVerschiebung("P7",e,m,A,P,S)),u=Number(this.getFacettenVerschiebung("P8",e,d,g,V,y))}this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[0].x+(e?this.scaleValue(s.ALLE.radius)+a:this.scaleValue(s.ALLE.radius)),y1:this.corner[0].y+(e?e:0),x2:this.corner[1].x-(e?this.scaleValue(s.ALLE.radius)+i:this.scaleValue(s.ALLE.radius)),y2:this.corner[1].y+(e?e:0)}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[1].x-(e?e:0),y1:this.corner[1].y+(e?this.scaleValue(s.ALLE.radius)+r:this.scaleValue(s.ALLE.radius)),x2:this.corner[2].x-(e?e:0),y2:this.corner[2].y-(e?this.scaleValue(s.ALLE.radius)+h:this.scaleValue(s.ALLE.radius))}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[2].x-(e?this.scaleValue(s.ALLE.radius)+l:this.scaleValue(s.ALLE.radius)),y1:this.corner[2].y-(e?e:0),x2:this.corner[3].x+(e?this.scaleValue(s.ALLE.radius)+c:this.scaleValue(s.ALLE.radius)),y2:this.corner[3].y-(e?e:0)}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[3].x+(e?e:0),y1:this.corner[3].y-(e?this.scaleValue(s.ALLE.radius)+n:this.scaleValue(s.ALLE.radius)),x2:this.corner[0].x+(e?e:0),y2:this.corner[0].y+(e?this.scaleValue(s.ALLE.radius)+u:this.scaleValue(s.ALLE.radius))}),this.rundeEcke(this.corner[0].x+(e?this.scaleValue(s.ALLE.radius)+a:this.scaleValue(s.ALLE.radius)),this.corner[0].y+(e?this.scaleValue(s.ALLE.radius)+u:this.scaleValue(s.ALLE.radius)),e?this.corner[0].x+this.scaleValue(s.ALLE.radius)+a-(this.corner[0].x+e):this.scaleValue(s.ALLE.radius),270,0),this.rundeEcke(this.corner[1].x-(e?this.scaleValue(s.ALLE.radius)+i:this.scaleValue(s.ALLE.radius)),this.corner[1].y+(e?this.scaleValue(s.ALLE.radius)+r:this.scaleValue(s.ALLE.radius)),e?this.corner[1].x-e-(this.corner[1].x-(this.scaleValue(s.ALLE.radius)+i)):this.scaleValue(s.ALLE.radius),0,90),this.rundeEcke(this.corner[2].x-(e?this.scaleValue(s.ALLE.radius)+l:this.scaleValue(s.ALLE.radius)),this.corner[2].y-(e?this.scaleValue(s.ALLE.radius)+h:this.scaleValue(s.ALLE.radius)),e?this.corner[2].x-e-(this.corner[2].x-(this.scaleValue(s.ALLE.radius)+l)):this.scaleValue(s.ALLE.radius),90,180),this.rundeEcke(this.corner[3].x+(e?this.scaleValue(s.ALLE.radius)+c:this.scaleValue(s.ALLE.radius)),this.corner[3].y-(e?this.scaleValue(s.ALLE.radius)+n:this.scaleValue(s.ALLE.radius)),e?this.corner[3].x+this.scaleValue(s.ALLE.radius)+c-(this.corner[3].x+e):this.scaleValue(s.ALLE.radius),180,270)},this.zeichneEcken=function(e){for(var t=this.data.bearbeitungen.ecken,s=[],a=0,i=0,r=0,h=0,l=0,c=0,n=0,u=0,o=0;o<t.length;o++)s[t[o].corner]=t[o];if(e){e=this.scaleValue(e);var d=this.corner[0].x,g=this.corner[0].y+(s.E1?s.E1.radius?this.scaleValue(s.E1.radius):this.scaleValue(s.E1.y):0),V=this.corner[0].x+(s.E1?s.E1.radius?this.scaleValue(s.E1.radius):this.scaleValue(s.E1.x):0),y=this.corner[0].y,f=this.corner[1].x-(s.E2?s.E2.radius?this.scaleValue(s.E2.radius):this.scaleValue(s.E2.x):0),x=this.corner[1].y,E=this.corner[1].x,b=this.corner[1].y+(s.E2?s.E2.radius?this.scaleValue(s.E2.radius):this.scaleValue(s.E2.y):0),p=this.corner[2].x,L=this.corner[2].y-(s.E3?s.E3.radius?this.scaleValue(s.E3.radius):this.scaleValue(s.E3.y):0),k=this.corner[2].x-(s.E3?s.E3.radius?this.scaleValue(s.E3.radius):this.scaleValue(s.E3.x):0),F=this.corner[2].y,m=this.corner[3].x+(s.E4?s.E4.radius?this.scaleValue(s.E4.radius):this.scaleValue(s.E4.x):0),A=this.corner[3].y,P=this.corner[3].x,S=this.corner[3].y-(s.E4?s.E4.radius?this.scaleValue(s.E4.radius):this.scaleValue(s.E4.y):0);a=V-d!=0?Number(this.getFacettenVerschiebung("P1",e,d,g,V,y)):0,i=E-f!=0?Number(this.getFacettenVerschiebung("P2",e,f,x,E,b)):0,r=b-x!=0?Number(this.getFacettenVerschiebung("P3",e,f,x,E,b)):0,h=F-L!=0?Number(this.getFacettenVerschiebung("P4",e,p,L,k,F)):0,l=p-k!=0?Number(this.getFacettenVerschiebung("P5",e,p,L,k,F)):0,c=m-P!=0?Number(this.getFacettenVerschiebung("P6",e,m,A,P,S)):0,n=A-S!=0?Number(this.getFacettenVerschiebung("P7",e,m,A,P,S)):0,u=g-y!=0?Number(this.getFacettenVerschiebung("P8",e,d,g,V,y)):0}this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[0].x+(s.E1?e?s.E1.radius?this.scaleValue(s.E1.radius)+a:this.scaleValue(s.E1.x)+a:s.E1.radius?this.scaleValue(s.E1.radius):this.scaleValue(s.E1.x):e?e:0),y1:this.corner[0].y+(e?e:0),x2:this.corner[1].x-(s.E2?e?s.E2.radius?this.scaleValue(s.E2.radius)+i:this.scaleValue(s.E2.x)+i:s.E2.radius?this.scaleValue(s.E2.radius):this.scaleValue(s.E2.x):e?e:0),y2:this.corner[1].y+(e?e:0)}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[1].x-(e?e:0),y1:this.corner[1].y+(s.E2?e?s.E2.radius?this.scaleValue(s.E2.radius)+r:this.scaleValue(s.E2.y)+r:s.E2.radius?this.scaleValue(s.E2.radius):this.scaleValue(s.E2.y):e?e:0),x2:this.corner[2].x-(e?e:0),y2:this.corner[2].y-(s.E3?e?s.E3.radius?this.scaleValue(s.E3.radius)+h:this.scaleValue(s.E3.y)+h:s.E3.radius?this.scaleValue(s.E3.radius):this.scaleValue(s.E3.y):e?e:0)}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[2].x-(s.E3?e?s.E3.radius?this.scaleValue(s.E3.radius)+l:this.scaleValue(s.E3.x)+l:s.E3.radius?this.scaleValue(s.E3.radius):this.scaleValue(s.E3.x):e?e:0),y1:this.corner[2].y-(e?e:0),x2:this.corner[3].x+(s.E4?e?s.E4.radius?this.scaleValue(s.E4.radius)+c:this.scaleValue(s.E4.x)+c:s.E4.radius?this.scaleValue(s.E4.radius):this.scaleValue(s.E4.x):e?e:0),y2:this.corner[3].y-(e?e:0)}),this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[3].x+(e?e:0),y1:this.corner[3].y-(s.E4?e?s.E4.radius?this.scaleValue(s.E4.radius)+n:this.scaleValue(s.E4.y)+n:s.E4.radius?this.scaleValue(s.E4.radius):this.scaleValue(s.E4.y):e?e:0),x2:this.corner[0].x+(e?e:0),y2:this.corner[0].y+(s.E1?e?s.E1.radius?this.scaleValue(s.E1.radius)+u:this.scaleValue(s.E1.y)+u:s.E1.radius?this.scaleValue(s.E1.radius):this.scaleValue(s.E1.y):e?e:0)});for(var z in s)"E1"==z?s[z].radius?this.rundeEcke(this.corner[0].x+(e?this.scaleValue(s[z].radius)+a:this.scaleValue(s[z].radius)),this.corner[0].y+(e?this.scaleValue(s[z].radius)+u:this.scaleValue(s[z].radius)),e?this.corner[0].x+this.scaleValue(s[z].radius)+a-(this.corner[0].x+e):this.scaleValue(s[z].radius),270,0):this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[0].x+(e?e:0),y1:this.corner[0].y+(e?this.scaleValue(s[z].y)+u:this.scaleValue(s[z].y)),x2:this.corner[0].x+(e?this.scaleValue(s[z].x)+a:this.scaleValue(s[z].x)),y2:this.corner[0].y+(e?e:0)}):"E2"==z?s[z].radius?this.rundeEcke(this.corner[1].x-(e?this.scaleValue(s[z].radius)+i:this.scaleValue(s[z].radius)),this.corner[1].y+(e?this.scaleValue(s[z].radius)+r:this.scaleValue(s[z].radius)),e?this.corner[1].x-e-(this.corner[1].x-(this.scaleValue(s[z].radius)+i)):this.scaleValue(s[z].radius),0,90):this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[1].x-(e?this.scaleValue(s[z].x)+i:this.scaleValue(s[z].x)),y1:this.corner[1].y+(e?e:0),x2:this.corner[1].x-(e?e:0),y2:this.corner[1].y+(e?this.scaleValue(s[z].y)+r:this.scaleValue(s[z].y))}):"E3"==z?s[z].radius?this.rundeEcke(this.corner[2].x-(e?this.scaleValue(s[z].radius)+l:this.scaleValue(s[z].radius)),this.corner[2].y-(e?this.scaleValue(s[z].radius)+h:this.scaleValue(s[z].radius)),e?this.corner[2].x-e-(this.corner[2].x-(this.scaleValue(s[z].radius)+l)):this.scaleValue(s[z].radius),90,180):this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[2].x-(e?e:0),y1:this.corner[2].y-(e?this.scaleValue(s[z].y)+h:this.scaleValue(s[z].y)),x2:this.corner[2].x-(e?this.scaleValue(s[z].x)+l:this.scaleValue(s[z].x)),y2:this.corner[2].y-(e?e:0)}):"E4"==z&&(s[z].radius?this.rundeEcke(this.corner[3].x+(e?this.scaleValue(s[z].radius)+c:this.scaleValue(s[z].radius)),this.corner[3].y-(e?this.scaleValue(s[z].radius)+n:this.scaleValue(s[z].radius)),e?this.corner[3].x+this.scaleValue(s[z].radius)+c-(this.corner[3].x+e):this.scaleValue(s[z].radius),180,270):this.config.bild.drawLine({strokeStyle:"#000",strokeWidth:1,x1:this.corner[3].x+(e?this.scaleValue(s[z].x)+c:this.scaleValue(s[z].x)),y1:this.corner[3].y-(e?e:0),x2:this.corner[3].x+(e?e:0),y2:this.corner[3].y-(e?this.scaleValue(s[z].y)+n:this.scaleValue(s[z].y))}))},this.erstelleRundeHalter=function(e,t){"ALLE"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?(this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser)))):(this.zeichneKreis(!0,"halter","#555555",1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"),this.zeichneKreis(!0,"halter","#555555",1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"),this.zeichneKreis(!0,"halter","#555555",1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"),this.zeichneKreis(!0,"halter","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF")):"E1"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.zeichneKreis(!0,"halter","#555555",1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"):"E2"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.zeichneKreis(!0,"halter","#555555",1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"):"E3"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.zeichneKreis(!0,"halter","#555555",1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"):"E4"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.zeichneKreis(!0,"halter","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"):"FREI"==e.corner&&("undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.zeichneKreis(!0,"halter","#555555",1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)/2),"#FFFFFF"))},this.erstelleSenkungHalter=function(e,t){var s={dB:Number(t.plattenbohrungUnterseite),sB:Number(t.durchmesser),x:e.x,y:e.y};"ALLE"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?(this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser)))):this.setSenkung(s,"ALLE"):"E1"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.setSenkung(s,"E1"):"E2"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.setSenkung(s,"E2"):"E3"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.setSenkung(s,"E3"):"E4"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.setSenkung(s,"E4"):"FREI"==e.corner&&("undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.durchmesser)),this.scaleValue(parseFloat(t.durchmesser))):this.setSenkung(s,"E4"))},this.erstelleEckigeHalter=function(e,t){"ALLE"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?(this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))),this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge)))):(this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)),this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)),this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)),this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge))):"E1"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))):this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[0].x+this.scaleValue(e.x),this.corner[0].y+this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)):"E2"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"/top"+t.bild.replace(".jpg",".png"),this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))):this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[1].x-this.scaleValue(e.x),this.corner[1].y+this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)):"E3"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))):this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[2].x-this.scaleValue(e.x),this.corner[2].y-this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)):"E4"==e.corner?"undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))):this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)):"FREI"==e.corner&&("undefined"!=typeof t.bild&&""!=t.bild?this.zeichneHalterBild(!0,"halter","halter",this.config.imgPaths.halter+"top"+t.bild.replace(".jpg",".png"),this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),this.scaleValue(parseFloat(t.halterkantenlaenge)),this.scaleValue(parseFloat(t.halterkantenlaenge))):this.drawRect(!0,"halter","halter","#555555",1,1,this.corner[3].x+this.scaleValue(e.x),this.corner[3].y-this.scaleValue(e.y),parseFloat(t.halterkantenlaenge),parseFloat(t.halterkantenlaenge)));
},this.zeichneHalter=function(){for(var e=this.data.halter,t=0;t<e.length;t++){var s=this.getHalterInfo(e[t].hid,e[t].vid);switch(s.position){case"senkung":this.erstelleSenkungHalter(e[t],s);break;case"inner":"0"==parseInt(s.halterkantenlaenge)?this.erstelleRundeHalter(e[t],s):this.erstelleEckigeHalter(e[t],s);break;case"kante":}}return this},this.scaleValue=function(e){return Number(e*this.config.scale)},this.getFacettenVerschiebung=function(e,t,s,a,i,r){var h=0;switch(e){case"P1":h=t/Math.tan((180-180*Math.atan((a-r)/(i-s))/Math.PI)/2*Math.PI/180);break;case"P2":h=t/Math.tan((180-180*Math.atan((r-a)/(i-s))/Math.PI)/2*Math.PI/180);break;case"P3":h=t/Math.tan((180-180*Math.atan((i-s)/(r-a))/Math.PI)/2*Math.PI/180);break;case"P4":h=t/Math.tan((180-180*Math.atan((s-i)/(r-a))/Math.PI)/2*Math.PI/180);break;case"P5":h=t/Math.tan((180-180*Math.atan((r-a)/(s-i))/Math.PI)/2*Math.PI/180);break;case"P6":h=t/Math.tan((180-180*Math.atan((a-r)/(s-i))/Math.PI)/2*Math.PI/180);break;case"P7":h=t/Math.tan((180-180*Math.atan((s-i)/(a-r))/Math.PI)/2*Math.PI/180);break;case"P8":h=t/Math.tan((180-180*Math.atan((i-s)/(a-r))/Math.PI)/2*Math.PI/180)}return Math.abs(h)},this.getHalterInfo=function(e,t){for(var s=this.data.configuration.halter,a=0;a<s.length;a++)if(s[a].uid==e)for(var i=0;i<s[a].varianten.length;i++)if(s[a].varianten[i].uid==t)return s[a].varianten[i];return null}}